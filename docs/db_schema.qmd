---
title: Database Schema
---

## Overview

In a transcript database, the only strictly required field is `transcript_id` (although you'll almost always want to also include a `messages` field as that's the main thing targeted by most scanners). 

You can also include `source_*` fields as a reference to where the transcript originated as well as arbitrary other fields (trancript metadata) which are then queryable using the `Transcripts` API.

+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field           | Description                                                                                                                                                                    |
+=================+================================================================================================================================================================================+
| `transcript_id` | Required. A globally unique identifier for a transcript.                                                                                                                       |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `source_type`   | Optional. Type of transcript source (e.g. "weave", "logfire", "eval_log", etc.). Useful for providing a hint to readers about what might be available in the `metadata` field. |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `source_id`     | Optional. Globally unique identifier for a transcript source (e.g. a project id).                                                                                              |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `source_uri`    | Optional. URI for source data (e.g. link to a web page or REST resource for discovering more about the transcript).                                                            |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `messages`      | Optional. List of [ChatMessage](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#messages) with message history.                                                    |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `events`        | Optional. List of [Event](https://inspect.aisi.org.uk/reference/inspect_ai.event.html) with event history (e.g. model events, tool events, etc.)                               |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

### Metadata

You can include arbitrary other fields in your database which will be made available as `Transcript.metadata`. These fields can then be used for filtering in calls to `Transcripts.where()`. Note that `metadata` columns are forwarded into the results database for scans (`transcript_metadata`) so it is generally a good practice to not include large amounts of data in these columns.

### Messages

The `messages` field is a JSON encoded string of `list[ChatMessage]`. There are several helper functions available within the `inspect_ai` package to assist in converting from the raw message formats of various providers to the Inspect `ChatMessage` format:

+-------------------------+----------------------------------------------------------------------------------------------------------------------------------------+
| Provider API            | Functions                                                                                                                              |
+=========================+========================================================================================================================================+
| OpenAI Chat Completions | [messages_from_openai()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#messages_from_openai)\                            |
|                         | [model_output_from_openai()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#model_output_from_openai)                     |
+-------------------------+----------------------------------------------------------------------------------------------------------------------------------------+
| OpenAI Responses        | [messages_from_openai_responses()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#messages_from_openai_responses)\        |
|                         | [model_output_from_openai_responses()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#model_output_from_openai_responses) |
+-------------------------+----------------------------------------------------------------------------------------------------------------------------------------+
| Anthropic Messages      | [messages_from_anthropic()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#messages_from_anthropic)\                      |
|                         | [model_output_from_anthropic()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#model_output_from_anthropic)               |
+-------------------------+----------------------------------------------------------------------------------------------------------------------------------------+
| Google Generate Content | [messages_from_google()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#messages_from_google)\                            |
|                         | [model_output_from_google()](https://inspect.aisi.org.uk/reference/inspect_ai.model.html#model_output_from_google)                     |
+-------------------------+----------------------------------------------------------------------------------------------------------------------------------------+

The `events` field is less commonly used by scanners so less important to provide. It is a JSON-encded list of Inspect AI events (e.g. `ModelEvent`, `ToolEvxent`, etc.).


