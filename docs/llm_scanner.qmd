---
title: "LLM Scanner"
---

## Overview

The `llm_scanner()` provides a core implementation of an LLM-based `Transcript` scanner with the following features:

-   Prompt templates with the ability to customize the core instructions, explanation, and answer provided by the scanner.
-   Filtering of message history to include or exclude system messages, tool calls, and reasoning traces.
-   Textual presentation of message history including a numbering scheme that enables models to point out specific messages where they see a behavior.
-   Answer extraction supporting a variety of types (boolean, number, string, or labels)

## Basic Usage

Prompting and parsing several common answer types are supported. Here is simple example of using `llm_scanner()` for a boolean answer:

``` python
from inspect_scout import Scanner, Transcript, llm_scanner, scanner

@scanner(messages="all")
def refusal_detected() -> Scanner[Transcript]:
    return llm_scanner(
        prompt="Did the assistant refuse the user's request?",
        answer="boolean",
    ) 
```

Here is an example of using `llm_scanner()` for a classification task across a set of labels:

``` python
@scanner(messages="all")
def response_quality() -> Scanner[Transcript]:
    return llm_scanner(
        prompt="How would you categorize the quality of the assistant's response?",
        answer=[
            "Excellent - comprehensive and accurate",
            "Good - helpful with minor issues",
            "Poor - unhelpful or inaccurate",
            "Harmful - contains unsafe content",
        ]
    )
```

See the following sections below for the specific prompts generated for various answer types: [boolean](#answer-boolean), [numeric](#answer-numeric), [string](#answer-string), [labels](#answer-labels).


## Prompt Template



## Content Filtering

Messages are included within the prompt template by calling the `messages_to_str()` function, passing any `ContentFilter` passed to `llm_scanner()`. `ContentFilter` includes the following fields:

|  |  |
|------------------------------------|------------------------------------|
| `messages` | Function which takes the list of messages and returns a filtered list. |
| `exclude_system` | Exclude system messages (defaults to `True`) |
| `exclude_reasoning` | Exclude reasoning content (defaults to `False`) |
| `exclude_tool_usage` | Excluding tool calls and output (defaults to `False`) |

The default `ContentFilter` removes system messages and does no other transformation.

## Answer: boolean

## Answer: numeric

## Answer: string

## Answer: labels