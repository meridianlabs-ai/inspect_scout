{"version":3,"file":"Footer.js","sources":["../../src/app/components/Pager.tsx","../../src/app/components/Footer.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { ApplicationIcons } from \"../../components/icons\";\n\nimport styles from \"./Pager.module.css\";\n\ninterface PagerProps {\n  itemCount: number;\n  page?: number;\n  setPage?: (page: number) => void;\n  itemsPerPage?: number;\n}\n\nexport const Pager: FC<PagerProps> = ({\n  itemCount,\n  page,\n  setPage,\n  itemsPerPage = 20,\n}) => {\n  const pageCount = Math.ceil(itemCount / itemsPerPage);\n  if (pageCount <= 1) {\n    return null;\n  }\n\n  const currentPage = page || 0;\n\n  const generatePaginationSegments = () => {\n    const segments: Array<{\n      type: \"page\" | \"ellipsis\";\n      page?: number;\n      key: string;\n    }> = [];\n\n    if (pageCount <= 5) {\n      // Show all pages if 5 or fewer\n      for (let i = 0; i < pageCount; i++) {\n        segments.push({ type: \"page\", page: i, key: `page-${i}` });\n      }\n    } else {\n      // There are more than 5 pages, use ellpsis to constrain the size\n\n      // first page\n      segments.push({ type: \"page\", page: 0, key: \"page-0\" });\n\n      // Determine the range around current page\n      const startPage = Math.max(1, currentPage - 1);\n      const endPage = Math.min(pageCount - 2, currentPage + 1);\n\n      // Add ellipsis before middle section if needed\n      if (startPage > 1) {\n        segments.push({ type: \"ellipsis\", key: \"ellipsis-start\" });\n      }\n\n      // Add middle section pages\n      for (let i = startPage; i <= endPage; i++) {\n        segments.push({ type: \"page\", page: i, key: `page-${i}` });\n      }\n\n      // Add ellipsis after middle section if needed\n      if (endPage < pageCount - 2) {\n        segments.push({ type: \"ellipsis\", key: \"ellipsis-end\" });\n      }\n\n      // last page\n      segments.push({\n        type: \"page\",\n        page: pageCount - 1,\n        key: `page-${pageCount - 1}`,\n      });\n    }\n\n    return segments;\n  };\n\n  const segments = generatePaginationSegments();\n\n  return (\n    <nav aria-label=\"Log Pagination\">\n      <ul className={clsx(\"pagination\", styles.pager)}>\n        <li className={clsx(currentPage === 0 ? \"disabled\" : \"\", styles.item)}>\n          <a\n            className={clsx(\"page-link\")}\n            onClick={() => {\n              if (currentPage > 0 && setPage) {\n                setPage(currentPage - 1);\n              }\n            }}\n          >\n            <i className={clsx(ApplicationIcons.navbar.back)} />\n          </a>\n        </li>\n\n        {segments.map((segment) => (\n          <li\n            key={segment.key}\n            className={clsx(\n              segment.type === \"page\" && segment.page === currentPage\n                ? \"active\"\n                : undefined,\n              segment.type === \"ellipsis\" ? \"disabled\" : undefined,\n              styles.item\n            )}\n          >\n            <a\n              className={clsx(\"page-link\")}\n              onClick={() => {\n                if (\n                  segment.type === \"page\" &&\n                  segment.page !== undefined &&\n                  setPage\n                ) {\n                  setPage(segment.page);\n                }\n              }}\n            >\n              {segment.type === \"page\" ? (segment.page || 0) + 1 : \"...\"}\n            </a>\n          </li>\n        ))}\n        <li\n          className={clsx(\n            currentPage + 1 >= pageCount ? \"disabled\" : \"\",\n            styles.item\n          )}\n        >\n          <a\n            className={clsx(\"page-link\")}\n            onClick={() => {\n              if (currentPage < pageCount && setPage) {\n                setPage(currentPage + 1);\n              }\n            }}\n          >\n            <i className={clsx(ApplicationIcons.navbar.forward)} />\n          </a>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC, ReactNode } from \"react\";\n\nimport { formatNumber } from \"../../utils/format\";\n\nimport styles from \"./Footer.module.css\";\nimport { Pager } from \"./Pager\";\n\ninterface FooterProps {\n  id: string;\n  className?: string | string[];\n\n  // Items\n  itemCount?: number;\n  filteredCount?: number;\n\n  // left side controls (replaced by progress when there is progress)\n  left?: ReactNode;\n\n  // Progress\n  progressText?: string;\n  progressBar?: ReactNode;\n\n  // Pagination\n  paginated: boolean;\n  pagesize?: number;\n  page?: number;\n  itemsPerPage?: number;\n  setPage?: (page: number) => void;\n\n  // labels\n  labels?: {\n    singular: string;\n    plural: string;\n  };\n}\n\nexport const Footer: FC<FooterProps> = ({\n  id,\n  className,\n  itemCount = 0,\n  paginated,\n  filteredCount,\n  left,\n  progressText,\n  progressBar,\n  page,\n  setPage,\n  itemsPerPage = -1,\n  labels = {\n    singular: \"item\",\n    plural: \"items\",\n  },\n}) => {\n  // Get filtered count from the store\n  const effectiveItemCount = filteredCount ?? itemCount;\n\n  // Compute the start and end items\n  const currentPage = page || 0;\n  const pageItemCount = Math.min(\n    itemsPerPage,\n    effectiveItemCount - currentPage * itemsPerPage\n  );\n  const startItem = effectiveItemCount > 0 ? currentPage * itemsPerPage + 1 : 0;\n  const endItem = startItem + pageItemCount - 1;\n\n  return (\n    <div\n      id={id}\n      className={clsx(\"text-size-smaller\", styles.footer, className)}\n    >\n      <div className={clsx(styles.left)}>\n        {progressText ? (\n          <div className={clsx(styles.spinnerContainer)}>\n            <div\n              className={clsx(\"spinner-border\", styles.spinner)}\n              role=\"status\"\n            >\n              <span className={clsx(\"visually-hidden\")}>{progressText}...</span>\n            </div>\n            <div className={clsx(\"text-style-secondary\", styles.label)}>\n              {progressText}...\n            </div>\n          </div>\n        ) : (\n          left\n        )}\n      </div>\n      <div className={clsx(styles.center)}>\n        {paginated && (\n          <Pager\n            itemCount={effectiveItemCount}\n            itemsPerPage={itemsPerPage}\n            page={page}\n            setPage={setPage}\n          />\n        )}\n      </div>\n      <div className={clsx(styles.right)}>\n        {progressBar ? (\n          progressBar\n        ) : paginated ? (\n          <div>\n            {effectiveItemCount === 0\n              ? \"\"\n              : filteredCount !== undefined && filteredCount !== itemCount\n                ? `${startItem} - ${endItem} / ${effectiveItemCount} (${itemCount} total)`\n                : `${startItem} - ${endItem} / ${effectiveItemCount}`}\n          </div>\n        ) : effectiveItemCount === 1 ? (\n          `${formatNumber(effectiveItemCount)} ${labels.singular}`\n        ) : (\n          `${formatNumber(effectiveItemCount)} ${labels.plural}`\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":["segments","jsx","jsxs","left","styles"],"mappings":"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"}