{"version":3,"file":"Modal.js","sources":["../../src/components/Modal.tsx"],"sourcesContent":["import { FC, ReactNode, useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nimport styles from \"./Modal.module.css\";\n\ninterface ModalProps {\n  show: boolean;\n  onHide: () => void;\n  onSubmit?: () => void;\n  title: string;\n  children: ReactNode;\n  footer?: ReactNode;\n}\n\nexport const Modal: FC<ModalProps> = ({\n  show,\n  onHide,\n  onSubmit,\n  title,\n  children,\n  footer,\n}) => {\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  // Handle escape and enter keys\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!show) return;\n      if (e.key === \"Escape\") {\n        onHide();\n      } else if (e.key === \"Enter\" && onSubmit) {\n        e.preventDefault();\n        onSubmit();\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => document.removeEventListener(\"keydown\", handleKeyDown);\n  }, [show, onHide, onSubmit]);\n\n  // Focus first element with autofocus attribute when modal opens\n  useEffect(() => {\n    if (show && modalRef.current) {\n      const autofocusEl = modalRef.current.querySelector<HTMLElement>(\n        \"[autofocus], [data-autofocus]\"\n      );\n      if (autofocusEl) {\n        // Small delay to ensure web component is ready\n        setTimeout(() => autofocusEl.focus(), 0);\n      }\n    }\n  }, [show]);\n\n  if (!show) return null;\n\n  return createPortal(\n    <div className={styles.backdrop} onClick={onHide}>\n      <div\n        ref={modalRef}\n        className={styles.modal}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className={styles.header}>\n          <h3 className={styles.title}>{title}</h3>\n          <button className={styles.closeButton} onClick={onHide}>\n            <i className=\"codicon codicon-close\" />\n          </button>\n        </div>\n        <div className={styles.body}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>,\n    document.body\n  );\n};\n"],"names":["title","footer","useRef","useEffect","createPortal","jsxs","jsx"],"mappings":";;;;;;;;;;;;;;;;;AAcO,MAAM,QAAwB,CAAC;AAAA,EACpC;AAAA,EACA;AAAA,EACA;AAAA,EACA,OAAAA;AAAA,EACA;AAAA,EACA,QAAAC;AACF,MAAM;AACJ,QAAM,WAAWC,aAAAA,OAAuB,IAAI;AAG5CC,eAAAA,UAAU,MAAM;AACd,UAAM,gBAAgB,CAAC,MAAqB;AAC1C,UAAI,CAAC,KAAM;AACX,UAAI,EAAE,QAAQ,UAAU;AACtB,eAAA;AAAA,MACF,WAAW,EAAE,QAAQ,WAAW,UAAU;AACxC,UAAE,eAAA;AACF,iBAAA;AAAA,MACF;AAAA,IACF;AACA,aAAS,iBAAiB,WAAW,aAAa;AAClD,WAAO,MAAM,SAAS,oBAAoB,WAAW,aAAa;AAAA,EACpE,GAAG,CAAC,MAAM,QAAQ,QAAQ,CAAC;AAG3BA,eAAAA,UAAU,MAAM;AACd,QAAI,QAAQ,SAAS,SAAS;AAC5B,YAAM,cAAc,SAAS,QAAQ;AAAA,QACnC;AAAA,MAAA;AAEF,UAAI,aAAa;AAEf,mBAAW,MAAM,YAAY,MAAA,GAAS,CAAC;AAAA,MACzC;AAAA,IACF;AAAA,EACF,GAAG,CAAC,IAAI,CAAC;AAET,MAAI,CAAC,KAAM,QAAO;AAElB,SAAOC,gBAAAA;AAAAA,0CACJ,OAAA,EAAI,WAAW,OAAO,UAAU,SAAS,QACxC,UAAAC,kCAAAA;AAAAA,MAAC;AAAA,MAAA;AAAA,QACC,KAAK;AAAA,QACL,WAAW,OAAO;AAAA,QAClB,SAAS,CAAC,MAAM,EAAE,gBAAA;AAAA,QAElB,UAAA;AAAA,UAAAA,kCAAAA,KAAC,OAAA,EAAI,WAAW,OAAO,QACrB,UAAA;AAAA,YAAAC,kCAAAA,IAAC,MAAA,EAAG,WAAW,OAAO,OAAQ,UAAAN,QAAM;AAAA,YACpCM,kCAAAA,IAAC,UAAA,EAAO,WAAW,OAAO,aAAa,SAAS,QAC9C,UAAAA,kCAAAA,IAAC,KAAA,EAAE,WAAU,wBAAA,CAAwB,EAAA,CACvC;AAAA,UAAA,GACF;AAAA,UACAA,kCAAAA,IAAC,OAAA,EAAI,WAAW,OAAO,MAAO,UAAS;AAAA,UACtCL,WAAUK,kCAAAA,IAAC,OAAA,EAAI,WAAW,OAAO,QAAS,UAAAL,QAAA,CAAO;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA,GAEtD;AAAA,IACA,SAAS;AAAA,EAAA;AAEb;"}