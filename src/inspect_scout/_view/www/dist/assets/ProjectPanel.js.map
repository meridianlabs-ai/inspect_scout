{"version":3,"file":"ProjectPanel.js","sources":["../../src/app/server/useProjectConfig.ts","../../src/app/project/configUtils.ts","../../src/utils/react.ts","../../src/app/project/hooks/useNestedConfig.ts","../../src/app/project/SettingsContent.tsx","../../src/app/project/ProjectPanel.tsx"],"sourcesContent":["import {\n  DefaultError,\n  useMutation,\n  UseMutationResult,\n  useQueryClient,\n} from \"@tanstack/react-query\";\n\nimport { useApi } from \"../../state/store\";\nimport { ProjectConfig, ProjectConfigInput } from \"../../types/api-types\";\nimport { AsyncData } from \"../../utils/asyncData\";\nimport { useAsyncDataFromQuery } from \"../../utils/asyncDataFromQuery\";\n\nexport type ProjectConfigWithEtag = {\n  config: ProjectConfig;\n  etag: string;\n};\n\n/**\n * Loads project configuration from scout.yaml.\n *\n * Returns both the config and an etag for optimistic concurrency control.\n *\n * Automatic refetching is disabled to support optimistic locking:\n * - External changes are detected via etag mismatch on save (412 error)\n * - User explicitly chooses to reload or force save on conflict\n */\nexport const useProjectConfig = (): AsyncData<ProjectConfigWithEtag> => {\n  const api = useApi();\n\n  return useAsyncDataFromQuery({\n    queryKey: [\"project-config\", \"project-config-inv\"],\n    queryFn: () => api.getProjectConfig(),\n    staleTime: Infinity,\n    refetchOnWindowFocus: false,\n    refetchOnMount: false,\n    refetchOnReconnect: false,\n  });\n};\n\n/**\n * Mutation hook for updating project configuration.\n *\n * Updates scout.yaml while preserving comments and formatting.\n * Requires the current etag for optimistic concurrency control.\n *\n * On success, updates the query cache with the new config and etag.\n * On 412 Precondition Failed, the config was modified externally.\n */\nexport const useUpdateProjectConfig = (): UseMutationResult<\n  ProjectConfigWithEtag,\n  DefaultError,\n  { config: ProjectConfigInput; etag: string | null }\n> => {\n  const api = useApi();\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ config, etag }) => api.updateProjectConfig(config, etag),\n    onSuccess: (data) => {\n      // Update cache with new config and etag\n      queryClient.setQueryData([\"project-config\", \"project-config-inv\"], data);\n      queryClient\n        .invalidateQueries({ queryKey: [\"config\", \"project-config-inv\"] })\n        .catch(console.log);\n    },\n  });\n};\n\n/*\nimport { useProjectConfig, useUpdateProjectConfig } from \"./server/useProjectConfig\";                                \n                                                                                                                      \nfunction ConfigEditor() {                                                                                            \n  const configData = useProjectConfig();                                                                             \n  const mutation = useUpdateProjectConfig();                                                                         \n                                                                                                                      \n  if (configData.loading) return <Loading />;                                                                        \n  if (configData.error) return <Error error={configData.error} />;                                                   \n                                                                                                                      \n  const { config, etag } = configData.data;                                                                          \n                                                                                                                      \n  const handleSave = async (newConfig: ProjectConfigInput) => {                                                      \n    try {                                                                                                            \n      await mutation.mutateAsync({ config: newConfig, etag });                                                       \n    } catch (error) {                                                                                                \n      if (error instanceof ApiError && error.status === 412) {                                                       \n        // Config was modified externally - prompt user to refresh                                                   \n      }                                                                                                              \n    }                                                                                                                \n  };                                                                                                                 \n  return <Form config={config} onSave={handleSave} />;                                                               \n}                             \n\n*/\n","import { ProjectConfigInput } from \"../../types/api-types\";\n\n/**\n * Deep equality check for config objects using JSON serialization.\n */\nexport function configsEqual(\n  a: Partial<ProjectConfigInput> | null,\n  b: Partial<ProjectConfigInput> | null\n): boolean {\n  if (a === b) return true;\n  if (!a || !b) return false;\n  return JSON.stringify(a) === JSON.stringify(b);\n}\n\n/**\n * Check if a value is \"empty\" (null, undefined, or empty object/array).\n */\nexport function isEmpty(value: unknown): boolean {\n  if (value === null || value === undefined) return true;\n  if (Array.isArray(value)) return value.length === 0;\n  if (typeof value === \"object\") return Object.keys(value).length === 0;\n  return false;\n}\n\n/**\n * Filter out null and undefined values from an object.\n */\nexport function filterNullValues<T extends Record<string, unknown>>(\n  obj: T\n): Partial<T> {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([, v]) => v !== null && v !== undefined)\n  ) as Partial<T>;\n}\n\n/**\n * Deep copy an object using JSON serialization.\n * Note: Only works for JSON-serializable types (objects, arrays, primitives).\n * Loses functions, Symbols, undefined values. Circular references will throw.\n */\nexport function deepCopy<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Clean nested config (cache/batch) for saving.\n * Handles boolean, number, object, null, and undefined values.\n */\nfunction cleanNestedConfig(\n  edited: Record<string, unknown> | boolean | number | null | undefined,\n  original: Record<string, unknown> | boolean | number | null | undefined\n): Record<string, unknown> | boolean | number | null | undefined {\n  // Preserve boolean and number values as-is\n  if (typeof edited === \"boolean\" || typeof edited === \"number\") {\n    return edited;\n  }\n\n  // If edited is empty, return null if original had content\n  if (edited === null || edited === undefined) {\n    if (original !== null && original !== undefined) {\n      return null;\n    }\n    return undefined;\n  }\n\n  const result: Record<string, unknown> = {};\n  const originalObj =\n    typeof original === \"object\" && original !== null ? original : {};\n\n  for (const [key, value] of Object.entries(edited)) {\n    const origValue = originalObj[key];\n    const valueChanged = JSON.stringify(value) !== JSON.stringify(origValue);\n\n    if (valueChanged) {\n      result[key] = value;\n    } else if (!isEmpty(value)) {\n      result[key] = value;\n    }\n  }\n\n  // If result is empty but original had content, return true (enabled state)\n  if (Object.keys(result).length === 0) {\n    if (original !== null && original !== undefined) {\n      return true;\n    }\n    return undefined;\n  }\n\n  return result;\n}\n\n/**\n * Clean generate_config for saving.\n * Handles nested cache/batch configs and removes empty values.\n */\nfunction cleanGenerateConfig(\n  edited: Record<string, unknown> | null | undefined,\n  original: Record<string, unknown> | null | undefined\n): Record<string, unknown> | null | undefined {\n  // Handle empty edited config\n  if (\n    edited === null ||\n    edited === undefined ||\n    (typeof edited === \"object\" && Object.keys(edited).length === 0)\n  ) {\n    const originalHasContent =\n      original !== null &&\n      original !== undefined &&\n      typeof original === \"object\" &&\n      Object.keys(original).length > 0;\n    if (originalHasContent) {\n      return null;\n    }\n    return undefined;\n  }\n\n  const result: Record<string, unknown> = {};\n  const originalObj = original ?? {};\n\n  for (const key of Object.keys(edited)) {\n    const editedValue = edited[key];\n    const originalValue = originalObj[key];\n\n    // Handle nested cache/batch configs\n    if (key === \"cache\" || key === \"batch\") {\n      const cleanedNested = cleanNestedConfig(\n        editedValue as\n          | Record<string, unknown>\n          | boolean\n          | number\n          | null\n          | undefined,\n        originalValue as\n          | Record<string, unknown>\n          | boolean\n          | number\n          | null\n          | undefined\n      );\n      if (cleanedNested !== undefined) {\n        result[key] = cleanedNested;\n      }\n      continue;\n    }\n\n    // Handle null/undefined values\n    if (editedValue === null || editedValue === undefined) {\n      const originalHadContent =\n        originalValue !== null &&\n        originalValue !== undefined &&\n        (typeof originalValue !== \"object\" ||\n          Object.keys(originalValue).length > 0);\n      if (originalHadContent) {\n        result[key] = null;\n      }\n      continue;\n    }\n\n    result[key] = editedValue;\n  }\n\n  if (Object.keys(result).length === 0) {\n    return undefined;\n  }\n\n  return result;\n}\n\n/**\n * Compute the config to save by comparing edited values against original server state.\n * Only includes values that have changed or have content.\n */\nexport function computeConfigToSave(\n  edited: Partial<ProjectConfigInput>,\n  original: Partial<ProjectConfigInput>,\n  serverConfig: ProjectConfigInput\n): ProjectConfigInput {\n  const result: Record<string, unknown> = {};\n\n  const allKeys = new Set([\n    ...Object.keys(edited),\n    ...Object.keys(serverConfig),\n  ]);\n\n  for (const key of allKeys) {\n    const editedValue = edited[key as keyof ProjectConfigInput];\n    const originalValue = original[key as keyof ProjectConfigInput];\n\n    // Handle generate_config specially\n    if (key === \"generate_config\") {\n      const cleanedGenConfig = cleanGenerateConfig(\n        editedValue as Record<string, unknown> | null | undefined,\n        originalValue as Record<string, unknown> | null | undefined\n      );\n      if (cleanedGenConfig !== undefined) {\n        result[key] = cleanedGenConfig;\n      }\n      continue;\n    }\n\n    const valueChanged =\n      JSON.stringify(editedValue) !== JSON.stringify(originalValue);\n\n    if (valueChanged) {\n      result[key] = editedValue;\n    } else if (!isEmpty(editedValue)) {\n      result[key] = editedValue;\n    }\n  }\n\n  return result as ProjectConfigInput;\n}\n\n/**\n * Initialize edited config from server config.\n * Extracts the relevant fields for editing.\n * All fields are normalized to null (not undefined) for consistent comparison.\n */\nexport function initializeEditedConfig(\n  serverConfig: ProjectConfigInput\n): Partial<ProjectConfigInput> {\n  return {\n    transcripts: serverConfig.transcripts ?? null,\n    filter: serverConfig.filter ?? null,\n    scans: serverConfig.scans ?? null,\n    max_transcripts: serverConfig.max_transcripts ?? null,\n    max_processes: serverConfig.max_processes ?? null,\n    limit: serverConfig.limit ?? null,\n    shuffle: serverConfig.shuffle ?? null,\n    tags: serverConfig.tags ?? null,\n    metadata: serverConfig.metadata ?? null,\n    log_level: serverConfig.log_level ?? null,\n    model: serverConfig.model ?? null,\n    model_base_url: serverConfig.model_base_url ?? null,\n    model_args: serverConfig.model_args ?? null,\n    generate_config: serverConfig.generate_config ?? null,\n  };\n}\n","import { useEffect, useRef } from \"react\";\n\n/**\n * Stable empty object reference to avoid unnecessary re-renders.\n * Use as a default value when a nullable object prop needs a fallback.\n */\nexport const STABLE_EMPTY_OBJECT: Record<string, never> = {};\n\nexport const useWhyDidYouUpdate = (componentName: string, props: any) => {\n  const previousProps = useRef(props);\n\n  useEffect(() => {\n    if (previousProps.current !== props) {\n      const changedProps = Object.entries(props).reduce(\n        (diff, [key, value]) => {\n          if (previousProps.current[key] !== value) {\n            diff[key] = {\n              before: previousProps.current[key],\n              after: value,\n            };\n          }\n          return diff;\n        },\n        {} as Record<string, unknown>\n      );\n\n      if (Object.keys(changedProps).length > 0) {\n        console.log(`[${componentName}] props changed:`, changedProps);\n      } else {\n        console.log(`[${componentName}] no props changed`);\n      }\n    }\n\n    previousProps.current = props;\n  }, [props, componentName]);\n};\n","import { useCallback, useMemo } from \"react\";\n\nimport { filterNullValues } from \"../configUtils\";\n\n/**\n * Hook for managing nested config sections like cache and batch.\n *\n * These configs can be:\n * - null/undefined (disabled)\n * - true (enabled with defaults)\n * - number (for batch: simple size value)\n * - object (enabled with specific settings)\n *\n * @param configValue The current config value (from parent generate_config)\n * @param updateParent Function to update the parent config with new nested value\n */\nexport function useNestedConfig<T extends Record<string, unknown>>(\n  configValue: T | boolean | number | null | undefined,\n  updateParent: (value: T | boolean | null) => void\n) {\n  const enabled =\n    configValue !== null && configValue !== undefined && configValue !== false;\n\n  const config: Partial<T> = useMemo(() => {\n    if (typeof configValue === \"object\" && configValue !== null) {\n      return { ...configValue }; // Shallow copy\n    }\n    return {} as Partial<T>;\n  }, [configValue]);\n\n  const setEnabled = useCallback(\n    (newEnabled: boolean) => {\n      if (newEnabled) {\n        updateParent(true);\n      } else {\n        updateParent(null);\n      }\n    },\n    [updateParent]\n  );\n\n  const updateConfig = useCallback(\n    (updates: Partial<T>) => {\n      const existingConfig =\n        typeof configValue === \"object\" && configValue !== null\n          ? filterNullValues(configValue)\n          : {};\n      updateParent({\n        ...existingConfig,\n        ...updates,\n      } as T);\n    },\n    [configValue, updateParent]\n  );\n\n  return {\n    enabled,\n    config,\n    setEnabled,\n    updateConfig,\n  };\n}\n\n/**\n * Hook specifically for batch config which can also be a simple number (size).\n */\nexport function useBatchConfig<T extends Record<string, unknown>>(\n  configValue: T | boolean | number | null | undefined,\n  updateParent: (value: T | boolean | null) => void\n) {\n  const base = useNestedConfig(configValue, updateParent);\n\n  const simpleBatchSize = typeof configValue === \"number\" ? configValue : null;\n\n  const updateConfig = useCallback(\n    (updates: Partial<T>) => {\n      const existingConfig =\n        typeof configValue === \"object\" && configValue !== null\n          ? filterNullValues(configValue)\n          : {};\n      const size =\n        typeof configValue === \"number\"\n          ? configValue\n          : (existingConfig as Record<string, unknown>).size;\n      updateParent({\n        ...(size !== undefined ? { size } : {}),\n        ...existingConfig,\n        ...updates,\n      } as T);\n    },\n    [configValue, updateParent]\n  );\n\n  const currentBatchSize = useMemo(() => {\n    if (typeof configValue === \"object\" && configValue !== null) {\n      return (configValue as Record<string, unknown>).size as\n        | number\n        | undefined;\n    }\n    return simpleBatchSize ?? undefined;\n  }, [configValue, simpleBatchSize]);\n\n  return {\n    ...base,\n    updateConfig,\n    currentBatchSize,\n  };\n}\n","import {\n  VscodeCheckbox,\n  VscodeFormHelper,\n  VscodeLabel,\n  VscodeTextfield,\n} from \"@vscode-elements/react-elements\";\nimport { FC, useCallback, useEffect, useRef, useState } from \"react\";\n\nimport {\n  BatchConfig,\n  CachePolicy,\n  GenerateConfigInput,\n  ProjectConfigInput,\n} from \"../../types/api-types\";\nimport { STABLE_EMPTY_OBJECT } from \"../../utils/react\";\n\nimport {\n  KeyValueField,\n  NumberField,\n  SelectField,\n  TextField,\n} from \"./components/FormFields\";\nimport { filterNullValues } from \"./configUtils\";\nimport { useBatchConfig, useNestedConfig } from \"./hooks/useNestedConfig\";\nimport styles from \"./ProjectPanel.module.css\";\n\n// Constants for select options\nconst LOG_LEVELS = [\n  \"debug\",\n  \"http\",\n  \"sandbox\",\n  \"info\",\n  \"warning\",\n  \"error\",\n  \"critical\",\n  \"notset\",\n] as const;\n\nconst VERBOSITY_OPTIONS = [\"low\", \"medium\", \"high\"] as const;\nconst EFFORT_OPTIONS = [\"low\", \"medium\", \"high\"] as const;\nconst REASONING_EFFORT_OPTIONS = [\n  \"none\",\n  \"minimal\",\n  \"low\",\n  \"medium\",\n  \"high\",\n  \"xhigh\",\n] as const;\nconst REASONING_SUMMARY_OPTIONS = [\n  \"none\",\n  \"concise\",\n  \"detailed\",\n  \"auto\",\n] as const;\nconst REASONING_HISTORY_OPTIONS = [\"none\", \"all\", \"last\", \"auto\"] as const;\n\n// Cache expiry validation: must be a number followed by M, H, D, or W\nconst CACHE_EXPIRY_PATTERN = /^\\d+[MHDWmhdw]$/;\n\nfunction validateCacheExpiry(value: string | null): string | null {\n  if (!value) return null; // Empty is valid (will use default)\n  if (CACHE_EXPIRY_PATTERN.test(value)) return null;\n  return \"Invalid format. Use a number followed by M, H, D, or W (e.g., 30M, 24H, 7D, 1W)\";\n}\n\nexport interface SettingsContentProps {\n  config: Partial<ProjectConfigInput>;\n  onChange: (updates: Partial<ProjectConfigInput>) => void;\n}\n\nexport const SettingsContent: FC<SettingsContentProps> = ({\n  config,\n  onChange,\n}) => {\n  const generateConfig: GenerateConfigInput =\n    config.generate_config ?? STABLE_EMPTY_OBJECT;\n\n  // Helper to update generate_config fields\n  const updateGenerateConfig = useCallback(\n    (updates: Partial<GenerateConfigInput>) => {\n      const merged = {\n        ...filterNullValues(generateConfig),\n        ...updates,\n      };\n\n      // Filter out null values from the merged result\n      const cleaned = filterNullValues(merged);\n\n      // If no content remains, set generate_config to null\n      const hasContent = Object.keys(cleaned).length > 0;\n\n      onChange({\n        generate_config: hasContent ? cleaned : null,\n      });\n    },\n    [generateConfig, onChange]\n  );\n\n  // Cache config hook\n  const cache = useNestedConfig<CachePolicy>(\n    generateConfig.cache,\n    useCallback(\n      (value) => updateGenerateConfig({ cache: value }),\n      [updateGenerateConfig]\n    )\n  );\n\n  // Batch config hook\n  const batch = useBatchConfig<BatchConfig>(\n    generateConfig.batch,\n    useCallback(\n      (value) => updateGenerateConfig({ batch: value }),\n      [updateGenerateConfig]\n    )\n  );\n\n  // Refs for scrolling options into view when enabled\n  const cacheOptionsRef = useRef<HTMLDivElement>(null);\n  const batchOptionsRef = useRef<HTMLDivElement>(null);\n\n  // Helper to scroll parent container to bottom by finding scrollable ancestor\n  const scrollToBottom = useCallback((element: HTMLElement | null) => {\n    if (!element) return;\n    // Find scrollable parent by checking overflow property\n    let scrollContainer = element.parentElement;\n    while (scrollContainer) {\n      const overflow = getComputedStyle(scrollContainer).overflowY;\n      if (overflow === \"auto\" || overflow === \"scroll\") {\n        scrollContainer.scrollTo({\n          top: scrollContainer.scrollHeight,\n          behavior: \"smooth\",\n        });\n        return;\n      }\n      scrollContainer = scrollContainer.parentElement;\n    }\n  }, []);\n\n  // Handle scroll after cache is enabled (called from checkbox handler)\n  const handleCacheEnabled = useCallback(() => {\n    // Delay scroll to not interfere with focus\n    setTimeout(() => {\n      scrollToBottom(cacheOptionsRef.current);\n    }, 150);\n  }, [scrollToBottom]);\n\n  // Handle scroll after batch is enabled (called from checkbox handler)\n  const handleBatchEnabled = useCallback(() => {\n    // Delay scroll to not interfere with focus\n    setTimeout(() => {\n      scrollToBottom(batchOptionsRef.current);\n    }, 150);\n  }, [scrollToBottom]);\n\n  // ===== General Section Helpers =====\n\n  // Tags field - use local state to allow typing commas/spaces freely\n  // but also update config on input so Ctrl+S saves correctly\n  const [tagsText, setTagsText] = useState(() =>\n    Array.isArray(config.tags) ? config.tags.join(\", \") : (config.tags ?? \"\")\n  );\n\n  // Sync local state when config changes externally (e.g., after save)\n  useEffect(() => {\n    const configValue = Array.isArray(config.tags)\n      ? config.tags.join(\", \")\n      : (config.tags ?? \"\");\n    // Only sync if the parsed values differ (avoids cursor jump while typing)\n    const currentParsed = tagsText\n      .split(\",\")\n      .map((t) => t.trim())\n      .filter((t) => t.length > 0);\n    const configParsed = Array.isArray(config.tags) ? config.tags : [];\n    if (JSON.stringify(currentParsed) !== JSON.stringify(configParsed)) {\n      // TODO: lint react-hooks/set-state-in-effect - consider if fixing this violation makes sense\n      // eslint-disable-next-line react-hooks/set-state-in-effect\n      setTagsText(configValue);\n    }\n  }, [config.tags, tagsText]);\n\n  const handleTagsInput = (value: string) => {\n    setTagsText(value);\n    // Also update config immediately so Ctrl+S works\n    const tags = value\n      .split(\",\")\n      .map((t) => t.trim())\n      .filter((t) => t.length > 0);\n    onChange({ tags: tags.length > 0 ? tags : null });\n  };\n\n  const shuffleEnabled =\n    config.shuffle !== null && config.shuffle !== undefined;\n  const shuffleSeed =\n    typeof config.shuffle === \"number\" ? config.shuffle : null;\n\n  const handleShuffleToggle = (enabled: boolean) => {\n    onChange({ shuffle: enabled ? true : null });\n  };\n\n  const handleShuffleSeedChange = (value: string) => {\n    const num = parseInt(value, 10);\n    onChange({ shuffle: isNaN(num) ? true : num });\n  };\n\n  return (\n    <>\n      {/* ===== LOCATIONS SECTION ===== */}\n      <div id=\"locations\" className={styles.section}>\n        <div className={styles.sectionHeader}>Locations</div>\n\n        <TextField\n          id=\"field-transcripts\"\n          label=\"Transcripts\"\n          helper=\"Transcripts to scan (filesystem, S3 bucket, etc.)\"\n          value={config.transcripts}\n          onChange={(v) => onChange({ transcripts: v })}\n          placeholder=\"Path to transcripts\"\n        />\n\n        <TextField\n          id=\"field-scans\"\n          label=\"Scans\"\n          helper=\"Location to write scan results (filesystem, S3 bucket, etc.)\"\n          value={config.scans}\n          onChange={(v) => onChange({ scans: v })}\n          placeholder=\"Path to scans output\"\n        />\n      </div>\n\n      {/* ===== FILTERING SECTION ===== */}\n      <div id=\"scanning\" className={styles.section}>\n        <div className={styles.sectionHeader}>Scanning</div>\n\n        <div className={styles.field}>\n          <VscodeLabel>Filter</VscodeLabel>\n          <VscodeFormHelper>\n            SQL WHERE clause(s) for filtering transcripts. This will constrain\n            any scan done within the project (i.e. filters applied to individual\n            scans will be AND combined with this filter).\n          </VscodeFormHelper>\n          <VscodeTextfield\n            id=\"field-filter\"\n            value={\n              Array.isArray(config.filter)\n                ? config.filter.join(\"; \")\n                : (config.filter ?? \"\")\n            }\n            onInput={(e) =>\n              onChange({\n                filter: (e.target as HTMLInputElement).value || undefined,\n              })\n            }\n            placeholder=\"Filter expression\"\n            spellCheck={false}\n            autocomplete=\"off\"\n          />\n        </div>\n\n        <NumberField\n          id=\"field-limit\"\n          label=\"Limit\"\n          helper=\"Limit the number of transcripts processed per scanner\"\n          value={config.limit}\n          onChange={(v) => onChange({ limit: v })}\n          placeholder=\"No limit\"\n        />\n\n        <div className={styles.field}>\n          <VscodeLabel>Shuffle</VscodeLabel>\n          <VscodeFormHelper>\n            Shuffle the order of transcripts (optionally specify a seed)\n          </VscodeFormHelper>\n          <div style={{ display: \"flex\", gap: \"0.5rem\", alignItems: \"center\" }}>\n            <VscodeCheckbox\n              id=\"field-shuffle\"\n              checked={shuffleEnabled}\n              onChange={(e) =>\n                handleShuffleToggle((e.target as HTMLInputElement).checked)\n              }\n            >\n              Enabled\n            </VscodeCheckbox>\n            {shuffleEnabled && (\n              <VscodeTextfield\n                id=\"field-shuffle-seed\"\n                type=\"number\"\n                value={shuffleSeed?.toString() ?? \"\"}\n                onInput={(e) =>\n                  handleShuffleSeedChange((e.target as HTMLInputElement).value)\n                }\n                placeholder=\"Seed (optional)\"\n                style={{ width: \"120px\" }}\n                spellCheck={false}\n                autocomplete=\"off\"\n              />\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* ===== CONCURRENCY SECTION ===== */}\n      <div id=\"concurrency\" className={styles.section}>\n        <div className={styles.sectionHeader}>Concurrency</div>\n\n        <NumberField\n          id=\"field-max-transcripts\"\n          label=\"Max Transcripts\"\n          helper=\"Maximum number of transcripts to process concurrently (default: 25)\"\n          value={config.max_transcripts}\n          onChange={(v) => onChange({ max_transcripts: v })}\n          placeholder=\"25\"\n        />\n\n        <NumberField\n          id=\"field-max-processes\"\n          label=\"Max Processes\"\n          helper=\"Maximum number of concurrent processes for multiprocessing (default: 4)\"\n          value={config.max_processes}\n          onChange={(v) => onChange({ max_processes: v })}\n          placeholder=\"4\"\n        />\n      </div>\n\n      {/* ===== MISCELLANEOUS SECTION ===== */}\n      <div id=\"miscellaneous\" className={styles.section}>\n        <div className={styles.sectionHeader}>Miscellaneous</div>\n\n        <div className={styles.field}>\n          <VscodeLabel>Tags</VscodeLabel>\n          <VscodeFormHelper>\n            One or more tags to apply to scans (comma-separated)\n          </VscodeFormHelper>\n          <VscodeTextfield\n            id=\"field-tags\"\n            value={tagsText}\n            onInput={(e) =>\n              handleTagsInput((e.target as HTMLInputElement).value)\n            }\n            placeholder=\"tag1, tag2, tag3\"\n            spellCheck={false}\n            autocomplete=\"off\"\n          />\n        </div>\n\n        <KeyValueField\n          id=\"field-metadata\"\n          label=\"Metadata\"\n          helper=\"Key/value pairs to apply to scans (one per line)\"\n          value={config.metadata}\n          onChange={(v) =>\n            onChange({ metadata: v as Record<string, string> | null })\n          }\n          placeholder=\"key=value\"\n        />\n\n        <SelectField\n          id=\"field-log-level\"\n          label=\"Log Level\"\n          helper=\"Level for logging to the console (default: warning)\"\n          value={config.log_level}\n          options={LOG_LEVELS}\n          onChange={(v) => onChange({ log_level: v })}\n          defaultLabel=\"Default (warning)\"\n        />\n      </div>\n\n      {/* ===== MODEL SECTION ===== */}\n      <div id=\"model\" className={styles.section}>\n        <div className={styles.sectionHeader}>Model</div>\n        <VscodeFormHelper style={{ marginBottom: \"-5px\" }}>\n          Model configuration specifies the defaults for the model used by the\n          LLM scanner, as well as the model returned by calls to{\" \"}\n          <code>get_model()</code> in custom scanners.\n        </VscodeFormHelper>\n\n        <TextField\n          id=\"field-model\"\n          label=\"Model\"\n          helper=\"Default model for LLM scanning (scanners can override as required)\"\n          value={config.model}\n          onChange={(v) => onChange({ model: v })}\n          placeholder=\"e.g., openai/gpt-5\"\n        />\n\n        <TextField\n          id=\"field-model-base-url\"\n          label=\"Model Base URL\"\n          helper=\"Base URL for communicating with the model API\"\n          value={config.model_base_url}\n          onChange={(v) => onChange({ model_base_url: v })}\n          placeholder=\"API base URL\"\n        />\n\n        <KeyValueField\n          id=\"field-model-args\"\n          label=\"Model Args\"\n          helper=\"Model creation args (key=value per line, or path to config file)\"\n          value={config.model_args}\n          onChange={(v) => onChange({ model_args: v })}\n          placeholder=\"key=value or /path/to/config.yaml\"\n        />\n      </div>\n\n      {/* ===== CONNECTION SECTION ===== */}\n      <div id=\"connection\" className={styles.section}>\n        <div className={styles.sectionHeader}>Connection</div>\n\n        <NumberField\n          id=\"field-max-connections\"\n          label=\"Max Connections\"\n          helper=\"Maximum concurrent connections to Model API (defaults to max_transcripts)\"\n          value={generateConfig.max_connections}\n          onChange={(v) => updateGenerateConfig({ max_connections: v })}\n          placeholder=\"Default\"\n        />\n\n        <NumberField\n          id=\"field-max-retries\"\n          label=\"Max Retries\"\n          helper=\"Maximum number of times to retry request (defaults to unlimited)\"\n          value={generateConfig.max_retries}\n          onChange={(v) => updateGenerateConfig({ max_retries: v })}\n          placeholder=\"Unlimited\"\n        />\n\n        <NumberField\n          id=\"field-timeout\"\n          label=\"Timeout\"\n          helper=\"Timeout (seconds) for entire request including retries\"\n          value={generateConfig.timeout}\n          onChange={(v) => updateGenerateConfig({ timeout: v })}\n          placeholder=\"No timeout\"\n        />\n\n        <NumberField\n          id=\"field-attempt-timeout\"\n          label=\"Attempt Timeout\"\n          helper=\"Timeout (seconds) for any given attempt before retrying\"\n          value={generateConfig.attempt_timeout}\n          onChange={(v) => updateGenerateConfig({ attempt_timeout: v })}\n          placeholder=\"No timeout\"\n        />\n      </div>\n\n      {/* ===== GENERATION SECTION ===== */}\n      <div id=\"generation\" className={styles.section}>\n        <div className={styles.sectionHeader}>Generation</div>\n\n        <NumberField\n          id=\"field-max-tokens\"\n          label=\"Max Tokens\"\n          helper=\"Maximum tokens that can be generated in the completion\"\n          value={generateConfig.max_tokens}\n          onChange={(v) => updateGenerateConfig({ max_tokens: v })}\n          placeholder=\"Model default\"\n        />\n\n        <NumberField\n          id=\"field-temperature\"\n          label=\"Temperature\"\n          helper=\"Sampling temperature (0-2). Higher = more random\"\n          value={generateConfig.temperature}\n          onChange={(v) => updateGenerateConfig({ temperature: v })}\n          placeholder=\"Model default\"\n          step={0.1}\n        />\n\n        <NumberField\n          id=\"field-top-p\"\n          label=\"Top P\"\n          helper=\"Nucleus sampling probability mass\"\n          value={generateConfig.top_p}\n          onChange={(v) => updateGenerateConfig({ top_p: v })}\n          placeholder=\"Model default\"\n          step={0.1}\n        />\n\n        <NumberField\n          id=\"field-top-k\"\n          label=\"Top K\"\n          helper=\"Sample from top K most likely next tokens\"\n          value={generateConfig.top_k}\n          onChange={(v) => updateGenerateConfig({ top_k: v })}\n          placeholder=\"Model default\"\n        />\n\n        <NumberField\n          id=\"field-frequency-penalty\"\n          label=\"Frequency Penalty\"\n          helper=\"Penalize tokens based on frequency (-2 to 2)\"\n          value={generateConfig.frequency_penalty}\n          onChange={(v) => updateGenerateConfig({ frequency_penalty: v })}\n          placeholder=\"Model default\"\n          step={0.1}\n        />\n\n        <NumberField\n          id=\"field-presence-penalty\"\n          label=\"Presence Penalty\"\n          helper=\"Penalize new tokens based on presence (-2 to 2)\"\n          value={generateConfig.presence_penalty}\n          onChange={(v) => updateGenerateConfig({ presence_penalty: v })}\n          placeholder=\"Model default\"\n          step={0.1}\n        />\n\n        <NumberField\n          id=\"field-seed\"\n          label=\"Seed\"\n          helper=\"Random seed for reproducibility\"\n          value={generateConfig.seed}\n          onChange={(v) => updateGenerateConfig({ seed: v })}\n          placeholder=\"Random\"\n        />\n\n        <SelectField\n          id=\"field-verbosity\"\n          label=\"Verbosity\"\n          helper=\"Response verbosity (GPT 5.x models only)\"\n          value={generateConfig.verbosity}\n          options={VERBOSITY_OPTIONS}\n          onChange={(v) => updateGenerateConfig({ verbosity: v })}\n        />\n\n        <SelectField\n          id=\"field-effort\"\n          label=\"Effort\"\n          helper=\"Response thoroughness (Claude Opus 4.5 only)\"\n          value={generateConfig.effort}\n          options={EFFORT_OPTIONS}\n          onChange={(v) => updateGenerateConfig({ effort: v })}\n        />\n      </div>\n\n      {/* ===== REASONING SECTION ===== */}\n      <div id=\"reasoning\" className={styles.section}>\n        <div className={styles.sectionHeader}>Reasoning</div>\n\n        <SelectField\n          id=\"field-reasoning-effort\"\n          label=\"Reasoning Effort\"\n          helper=\"Constrains effort on reasoning (varies by provider/model)\"\n          value={generateConfig.reasoning_effort}\n          options={REASONING_EFFORT_OPTIONS}\n          onChange={(v) => updateGenerateConfig({ reasoning_effort: v })}\n        />\n\n        <NumberField\n          id=\"field-reasoning-tokens\"\n          label=\"Reasoning Tokens\"\n          helper=\"Maximum tokens for reasoning (Anthropic/Google only)\"\n          value={generateConfig.reasoning_tokens}\n          onChange={(v) => updateGenerateConfig({ reasoning_tokens: v })}\n          placeholder=\"Model default\"\n        />\n\n        <SelectField\n          id=\"field-reasoning-summary\"\n          label=\"Reasoning Summary\"\n          helper=\"Summary of reasoning steps (OpenAI reasoning models only)\"\n          value={generateConfig.reasoning_summary}\n          options={REASONING_SUMMARY_OPTIONS}\n          onChange={(v) => updateGenerateConfig({ reasoning_summary: v })}\n        />\n\n        <SelectField\n          id=\"field-reasoning-history\"\n          label=\"Reasoning History\"\n          helper=\"Include reasoning in chat message history\"\n          value={generateConfig.reasoning_history}\n          options={REASONING_HISTORY_OPTIONS}\n          onChange={(v) => updateGenerateConfig({ reasoning_history: v })}\n        />\n      </div>\n\n      {/* ===== CACHE SECTION ===== */}\n      <div id=\"cache\" className={styles.section}>\n        <div className={styles.sectionHeader}>Cache</div>\n\n        <div className={styles.field}>\n          <VscodeCheckbox\n            id=\"field-cache-enabled\"\n            checked={cache.enabled}\n            onChange={(e) => {\n              const checked = (e.target as HTMLInputElement).checked;\n              cache.setEnabled(checked);\n              if (checked) handleCacheEnabled();\n            }}\n          >\n            Enable Caching\n          </VscodeCheckbox>\n          <VscodeFormHelper>\n            Cache model responses to improve performance and reduce API costs\n          </VscodeFormHelper>\n        </div>\n\n        {cache.enabled && (\n          <div ref={cacheOptionsRef}>\n            <TextField\n              id=\"field-cache-expiry\"\n              label=\"Expiry\"\n              helper=\"Cache expiration. Use a number followed by: M (minutes), H (hours), D (days), or W (weeks).\"\n              value={cache.config.expiry}\n              onChange={(v) => cache.updateConfig({ expiry: v })}\n              placeholder=\"1W (default)\"\n              validate={validateCacheExpiry}\n            />\n\n            <div className={styles.field}>\n              <VscodeLabel>Per Epoch</VscodeLabel>\n              <VscodeFormHelper>\n                Maintain separate cache entries per epoch\n              </VscodeFormHelper>\n              <VscodeCheckbox\n                id=\"field-cache-per-epoch\"\n                checked={cache.config.per_epoch ?? true}\n                onChange={(e) =>\n                  cache.updateConfig({\n                    per_epoch: (e.target as HTMLInputElement).checked,\n                  })\n                }\n              >\n                Enabled\n              </VscodeCheckbox>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* ===== BATCH SECTION ===== */}\n      <div id=\"batch\" className={styles.section}>\n        <div className={styles.sectionHeader}>Batch</div>\n\n        <div className={styles.field}>\n          <VscodeCheckbox\n            id=\"field-batch-enabled\"\n            checked={batch.enabled}\n            onChange={(e) => {\n              const checked = (e.target as HTMLInputElement).checked;\n              batch.setEnabled(checked);\n              if (checked) handleBatchEnabled();\n            }}\n          >\n            Enable Batch Processing\n          </VscodeCheckbox>\n          <VscodeFormHelper>\n            Process multiple requests in batches for improved throughput\n          </VscodeFormHelper>\n        </div>\n\n        {batch.enabled && (\n          <div ref={batchOptionsRef}>\n            <NumberField\n              id=\"field-batch-size\"\n              label=\"Batch Size\"\n              helper=\"Number of requests per batch\"\n              value={batch.currentBatchSize}\n              onChange={(v) => batch.updateConfig({ size: v })}\n              placeholder=\"Default\"\n            />\n\n            <NumberField\n              id=\"field-batch-max-size\"\n              label=\"Max Size\"\n              helper=\"Maximum batch size allowed\"\n              value={batch.config.max_size}\n              onChange={(v) => batch.updateConfig({ max_size: v })}\n              placeholder=\"No limit\"\n            />\n\n            <NumberField\n              id=\"field-batch-max-batches\"\n              label=\"Max Batches\"\n              helper=\"Maximum number of batches to process\"\n              value={batch.config.max_batches}\n              onChange={(v) => batch.updateConfig({ max_batches: v })}\n              placeholder=\"No limit\"\n            />\n\n            <NumberField\n              id=\"field-batch-send-delay\"\n              label=\"Send Delay\"\n              helper=\"Delay (seconds) before sending batch\"\n              value={batch.config.send_delay}\n              onChange={(v) => batch.updateConfig({ send_delay: v })}\n              placeholder=\"0\"\n              step={0.1}\n            />\n\n            <NumberField\n              id=\"field-batch-tick\"\n              label=\"Tick\"\n              helper=\"Tick interval (seconds) for batch processing\"\n              value={batch.config.tick}\n              onChange={(v) => batch.updateConfig({ tick: v })}\n              placeholder=\"Default\"\n              step={0.1}\n            />\n\n            <NumberField\n              id=\"field-batch-max-check-failures\"\n              label=\"Max Check Failures\"\n              helper=\"Maximum consecutive check failures before abort\"\n              value={batch.config.max_consecutive_check_failures}\n              onChange={(v) =>\n                batch.updateConfig({ max_consecutive_check_failures: v })\n              }\n              placeholder=\"No limit\"\n            />\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n","import { useQueryClient } from \"@tanstack/react-query\";\nimport {\n  VscodeButton,\n  VscodeFormHelper,\n} from \"@vscode-elements/react-elements\";\nimport { FC, useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useBlocker } from \"react-router-dom\";\n\nimport { ApiError } from \"../../api/request\";\nimport { Modal } from \"../../components/Modal\";\nimport { useDocumentTitle } from \"../../hooks/useDocumentTitle\";\nimport { AppConfig, ProjectConfigInput } from \"../../types/api-types\";\nimport { appAliasedPath } from \"../server/useAppConfig\";\nimport {\n  useProjectConfig,\n  useUpdateProjectConfig,\n} from \"../server/useProjectConfig\";\n\nimport {\n  computeConfigToSave,\n  configsEqual,\n  deepCopy,\n  initializeEditedConfig,\n} from \"./configUtils\";\nimport styles from \"./ProjectPanel.module.css\";\nimport { SettingsContent } from \"./SettingsContent\";\n\ninterface ProjectPanelProps {\n  config: AppConfig;\n}\n\n// Navigation structure for the settings panel\ninterface NavItem {\n  id: string;\n  label: string;\n}\n\ninterface NavSection {\n  group: string;\n  items: NavItem[];\n}\n\nconst NAV_SECTIONS: NavSection[] = [\n  {\n    group: \"General\",\n    items: [\n      { id: \"locations\", label: \"Locations\" },\n      { id: \"scanning\", label: \"Scanning\" },\n      { id: \"concurrency\", label: \"Concurrency\" },\n      { id: \"miscellaneous\", label: \"Miscellaneous\" },\n    ],\n  },\n  {\n    group: \"Model\",\n    items: [\n      { id: \"model\", label: \"Model\" },\n      { id: \"connection\", label: \"Connection\" },\n      { id: \"generation\", label: \"Generation\" },\n      { id: \"reasoning\", label: \"Reasoning\" },\n      { id: \"cache\", label: \"Cache\" },\n      { id: \"batch\", label: \"Batch\" },\n    ],\n  },\n];\n\nexport const ProjectPanel: FC<ProjectPanelProps> = ({ config }) => {\n  useDocumentTitle(\"Project\");\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const scrollContentRef = useRef<HTMLDivElement>(null);\n  const focusedFieldIdRef = useRef<string | null>(null);\n  const saveRef = useRef<() => void>(() => {});\n  // Track the etag from our own saves to skip re-initialization\n  const lastSavedEtagRef = useRef<string | null>(null);\n\n  // Capture focused element ID on mousedown (before click moves focus to button)\n  // We store the ID since React may recreate the DOM element\n  const handleSaveMouseDown = useCallback(() => {\n    const el = document.activeElement as HTMLElement;\n    if (el && el !== document.body && el.id) {\n      focusedFieldIdRef.current = el.id;\n    } else {\n      focusedFieldIdRef.current = null;\n    }\n  }, []);\n\n  // Scroll to section - only scrolls within the scrollContent container\n  const scrollToSection = useCallback((sectionId: string) => {\n    const container = scrollContentRef.current;\n    const element = document.getElementById(sectionId);\n    if (container && element) {\n      const containerRect = container.getBoundingClientRect();\n      const elementRect = element.getBoundingClientRect();\n      const scrollTop =\n        container.scrollTop + (elementRect.top - containerRect.top);\n      container.scrollTo({ top: scrollTop, behavior: \"smooth\" });\n    }\n  }, []);\n\n  const queryClient = useQueryClient();\n  const { loading, error, data } = useProjectConfig();\n  const mutation = useUpdateProjectConfig();\n\n  // Ctrl/Cmd+S keyboard shortcut to save\n  // Always handle since project panel is the only active UI when visible\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"s\") {\n        e.preventDefault();\n        // Guard against double-save during pending mutation\n        if (!mutation.isPending) {\n          // Capture focused element ID for restoration after save\n          const el = document.activeElement as HTMLElement;\n          if (el && el !== document.body && el.id) {\n            focusedFieldIdRef.current = el.id;\n          } else {\n            focusedFieldIdRef.current = null;\n          }\n          saveRef.current();\n        }\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [mutation.isPending]);\n\n  const [editedConfig, setEditedConfig] =\n    useState<Partial<ProjectConfigInput> | null>(null);\n  const [originalConfig, setOriginalConfig] =\n    useState<Partial<ProjectConfigInput> | null>(null);\n  const [conflictError, setConflictError] = useState(false);\n\n  // Initialize config state when data loads\n  // Skips re-init if this is our own save (etag matches what we just saved)\n  useEffect(() => {\n    if (!data) return;\n\n    // If editedConfig is null (initial load or after reload), initialize\n    if (!editedConfig) {\n      const initialized = initializeEditedConfig(\n        data.config as ProjectConfigInput\n      );\n      // TODO: lint react-hooks/set-state-in-effect - consider if fixing this violation makes sense\n      /* eslint-disable react-hooks/set-state-in-effect */\n      setEditedConfig(initialized);\n      setOriginalConfig(deepCopy(initialized));\n      /* eslint-enable react-hooks/set-state-in-effect */\n      lastSavedEtagRef.current = data.etag;\n      return;\n    }\n\n    // If etag matches what we just saved, skip re-init (this is our own save)\n    if (data.etag === lastSavedEtagRef.current) {\n      return;\n    }\n\n    // Etag changed unexpectedly - reinitialize\n    // (With current flow this shouldn't happen since external changes\n    // are detected via 412 on save, but handle it just in case)\n    const initialized = initializeEditedConfig(\n      data.config as ProjectConfigInput\n    );\n    setEditedConfig(initialized);\n    setOriginalConfig(deepCopy(initialized));\n    lastSavedEtagRef.current = data.etag;\n  }, [data, editedConfig]);\n\n  const hasChanges = useMemo(() => {\n    return !configsEqual(editedConfig, originalConfig);\n  }, [editedConfig, originalConfig]);\n\n  const blocker = useBlocker(\n    ({ currentLocation, nextLocation }) =>\n      hasChanges && currentLocation.pathname !== nextLocation.pathname\n  );\n\n  const handleConfigChange = useCallback(\n    (updates: Partial<ProjectConfigInput>) => {\n      setEditedConfig((prev) => ({\n        ...prev,\n        ...updates,\n      }));\n    },\n    []\n  );\n\n  const handleSave = useCallback(\n    (force = false) => {\n      if (!data || !editedConfig || !originalConfig) return;\n\n      const updatedConfig = computeConfigToSave(\n        editedConfig,\n        originalConfig,\n        data.config as ProjectConfigInput\n      );\n\n      mutation.mutate(\n        { config: updatedConfig, etag: force ? null : data.etag },\n        {\n          onSuccess: (responseData) => {\n            setConflictError(false);\n            lastSavedEtagRef.current = responseData.etag;\n            setOriginalConfig(deepCopy(editedConfig));\n            // Restore focus after save completes (delay to let React finish rendering)\n            const fieldId = focusedFieldIdRef.current;\n            setTimeout(() => {\n              if (fieldId) {\n                const field = document.getElementById(fieldId);\n                if (field) {\n                  field.focus();\n                }\n              }\n            }, 100);\n          },\n          onError: (err) => {\n            if (err instanceof ApiError && err.status === 412) {\n              setConflictError(true);\n            }\n          },\n        }\n      );\n    },\n    [data, editedConfig, originalConfig, mutation]\n  );\n\n  // Keep saveRef updated for keyboard shortcut\n  useEffect(() => {\n    saveRef.current = () => handleSave(false);\n  }, [handleSave]);\n\n  const handleSaveWithFocusRestore = (force = false) => {\n    if (!data || !editedConfig || !originalConfig) return;\n\n    const updatedConfig = computeConfigToSave(\n      editedConfig,\n      originalConfig,\n      data.config as ProjectConfigInput\n    );\n\n    mutation.mutate(\n      { config: updatedConfig, etag: force ? null : data.etag },\n      {\n        onSuccess: (responseData) => {\n          setConflictError(false);\n          lastSavedEtagRef.current = responseData.etag;\n          setOriginalConfig(deepCopy(editedConfig));\n          // Restore focus after the click event fully completes (delay to let React finish rendering)\n          const fieldId = focusedFieldIdRef.current;\n          setTimeout(() => {\n            if (fieldId) {\n              const field = document.getElementById(fieldId);\n              if (field) {\n                field.focus();\n              }\n            }\n          }, 100);\n        },\n        onError: (err) => {\n          if (err instanceof ApiError && err.status === 412) {\n            setConflictError(true);\n          }\n        },\n      }\n    );\n  };\n\n  const handleSaveAndNavigate = () => {\n    if (!data || !editedConfig || !originalConfig) {\n      blocker.proceed?.();\n      return;\n    }\n\n    const updatedConfig = computeConfigToSave(\n      editedConfig,\n      originalConfig,\n      data.config as ProjectConfigInput\n    );\n\n    mutation.mutate(\n      { config: updatedConfig, etag: data.etag },\n      {\n        onSuccess: (responseData) => {\n          setConflictError(false);\n          lastSavedEtagRef.current = responseData.etag;\n          setOriginalConfig(deepCopy(editedConfig));\n          blocker.proceed?.();\n        },\n        onError: (err) => {\n          if (err instanceof ApiError && err.status === 412) {\n            setConflictError(true);\n          }\n          blocker.reset?.();\n        },\n      }\n    );\n  };\n\n  const handleReload = () => {\n    setConflictError(false);\n    setEditedConfig(null);\n    setOriginalConfig(null);\n    // Reset expected etag so the init effect will re-initialize from server\n    lastSavedEtagRef.current = null;\n    void queryClient.invalidateQueries({ queryKey: [\"project-config-inv\"] });\n  };\n\n  return (\n    <div ref={containerRef} className={styles.container}>\n      {/* Header */}\n      <div className={styles.headerRow}>\n        <div>\n          <div className={styles.header}>Project Settings</div>\n          <div className={styles.detail}>\n            {appAliasedPath(config, config.project_dir)}/scout.yaml\n          </div>\n        </div>\n        <VscodeButton\n          disabled={!hasChanges || mutation.isPending}\n          onMouseDown={handleSaveMouseDown}\n          onClick={() => handleSaveWithFocusRestore(false)}\n        >\n          {mutation.isPending ? \"Saving...\" : \"Save Changes\"}\n        </VscodeButton>\n      </div>\n\n      {/* Conflict Banner */}\n      {conflictError && (\n        <div className={styles.conflictBanner}>\n          <span>Configuration was modified externally.</span>\n          <div className={styles.conflictActions}>\n            <VscodeButton secondary onClick={handleReload}>\n              Discard My Changes\n            </VscodeButton>\n            <VscodeButton onClick={() => handleSaveWithFocusRestore(true)}>\n              Keep My Changes\n            </VscodeButton>\n          </div>\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && <div className={styles.loading}>Loading...</div>}\n\n      {/* Error State */}\n      {error && (\n        <div className={styles.error}>\n          Error loading config: {error.message}\n        </div>\n      )}\n\n      {/* Split Layout: Tree + Content */}\n      {editedConfig && (\n        <div className={styles.splitLayout}>\n          {/* Navigation */}\n          <nav className={styles.treeNav}>\n            <ul className={styles.navList}>\n              {NAV_SECTIONS.map((section) => (\n                <li key={section.group} className={styles.navListItem}>\n                  <span className={styles.navGroup}>{section.group}</span>\n                  <ul className={styles.navList}>\n                    {section.items.map((item) => (\n                      <li key={item.id} className={styles.navListItem}>\n                        <button\n                          className={styles.navItem}\n                          onClick={() => scrollToSection(item.id)}\n                        >\n                          {item.label}\n                        </button>\n                      </li>\n                    ))}\n                  </ul>\n                </li>\n              ))}\n            </ul>\n          </nav>\n\n          {/* Scrollable Content */}\n          <div ref={scrollContentRef} className={styles.scrollContent}>\n            <VscodeFormHelper style={{ marginBottom: \"10px\" }}>\n              Project settings provide default options for scans run from the\n              project directory. You can override some or all of the defaults\n              for each scan using command line parameters or a scan job config\n              file.\n            </VscodeFormHelper>\n            <SettingsContent\n              config={editedConfig}\n              onChange={handleConfigChange}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Unsaved Changes Modal */}\n      <Modal\n        show={blocker.state === \"blocked\"}\n        onHide={() => blocker.reset?.()}\n        title=\"Unsaved Changes\"\n        footer={\n          <>\n            <VscodeButton secondary onClick={() => blocker.proceed?.()}>\n              Don't Save\n            </VscodeButton>\n            <VscodeButton secondary onClick={() => blocker.reset?.()}>\n              Cancel\n            </VscodeButton>\n            <VscodeButton data-autofocus onClick={handleSaveAndNavigate}>\n              Save\n            </VscodeButton>\n          </>\n        }\n      >\n        You have unsaved changes. Do you want to save before leaving?\n      </Modal>\n    </div>\n  );\n};\n"],"names":["useMemo","useCallback","useRef","useState","useEffect","jsxs","Fragment","jsx","initialized"],"mappings":"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"}