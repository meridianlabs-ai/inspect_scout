{"version":3,"file":"ScannerResultPanel.js","sources":["../../src/app/hooks/useSelectedScanResultData.ts","../../src/app/server/useScanDataframeInput.ts","../../src/app/hooks/useSelectedScanResultInputData.ts","../../src/app/server/useHasTranscript.ts","../../src/app/scannerResult/error/ErrorPanel.tsx","../../src/components/usage/TokenTable.tsx","../../src/components/usage/ModelTokenTable.tsx","../../src/app/scannerResult/info/InfoPanel.tsx","../../src/app/scannerResult/metadata/MetadataPanel.tsx","../../src/app/components/ColumnHeader.tsx","../../src/app/scannerResult/result/ResultBody.tsx","../../src/app/scannerResult/result/ResultSidebar.tsx","../../src/app/scannerResult/result/ResultPanel.tsx","../../src/app/scannerResult/ScannerResultHeader.tsx","../../src/app/scannerResult/ScannerResultNav.tsx","../../src/app/scannerResult/transcript/TranscriptPanel.tsx","../../src/app/scannerResult/ScannerResultPanel.tsx"],"sourcesContent":["import { ColumnTable } from \"arquero\";\nimport { useEffect, useMemo, useState } from \"react\";\n\nimport { AsyncData, data, loading } from \"../../utils/asyncData\";\nimport { ScanResultData } from \"../types\";\nimport { parseScanResultData } from \"../utils/arrowHelpers\";\n\nimport { useSelectedScanDataframe } from \"./useSelectedScanDataframe\";\n\nexport const useSelectedScanResultData = (\n  scanResultUuid: string | undefined\n): AsyncData<ScanResultData | undefined> => {\n  const { data: columnTable } = useSelectedScanDataframe();\n  return useScanResultData(columnTable, scanResultUuid);\n};\n\nconst useScanResultData = (\n  // TODO: We need `| undefined` both on the input param as well as on the output\n  // in order to honor the rules of hooks when the caller doesn't YET have the uuid.\n  // Better would be to refactor the parent so that it doesn't even render until\n  // it has the params so that it can avoid the hook call altogether.\n  columnTable: ColumnTable | undefined,\n  rowIdentifier: string | undefined\n): AsyncData<ScanResultData | undefined> => {\n  const [scanResultData, setScanResultData] = useState<\n    ScanResultData | undefined\n  >(undefined);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const filtered = useMemo((): ColumnTable | undefined => {\n    // Not a valid index\n    if (!rowIdentifier || !columnTable) {\n      return undefined;\n    }\n\n    // Empty table\n    if (columnTable.columnNames().length === 0) {\n      return undefined;\n    }\n\n    const filtered = columnTable\n      .params({ targetIdentifier: rowIdentifier })\n      .filter(\n        (d: { identifier: string }, $: { targetIdentifier: string }) =>\n          d.identifier === $.targetIdentifier\n      );\n\n    if (filtered.numRows() === 0) {\n      return undefined;\n    }\n\n    return filtered;\n  }, [columnTable, rowIdentifier]);\n\n  useEffect(() => {\n    if (!filtered) {\n      // TODO: lint react-hooks/set-state-in-effect - consider if fixing this violation makes sense\n      /* eslint-disable react-hooks/set-state-in-effect */\n      setScanResultData(undefined);\n      setIsLoading(false);\n      /* eslint-enable react-hooks/set-state-in-effect */\n      return;\n    }\n\n    let cancelled = false;\n    setIsLoading(true);\n\n    const run = async () => {\n      try {\n        const result = await parseScanResultData(filtered);\n        if (!cancelled) {\n          setScanResultData(result);\n          setIsLoading(false);\n        }\n      } catch (error) {\n        if (!cancelled) {\n          console.error(\"Error parsing scanner data:\", error);\n          setScanResultData(undefined);\n          setIsLoading(false);\n        }\n      }\n    };\n\n    void run();\n\n    return () => {\n      cancelled = true;\n    };\n  }, [filtered]);\n\n  return isLoading ? loading : data(scanResultData);\n};\n","import { skipToken } from \"@tanstack/react-query\";\n\nimport { useApi } from \"../../state/store\";\nimport { AsyncData } from \"../../utils/asyncData\";\nimport { useAsyncDataFromQuery } from \"../../utils/asyncDataFromQuery\";\nimport { ScanResultInputData } from \"../types\";\n\ntype ScanDataframeInputParams = {\n  scansDir: string;\n  scanPath: string;\n  scanner: string;\n  uuid: string;\n};\n\nexport const useScanDataframeInput = (\n  params: ScanDataframeInputParams | typeof skipToken\n): AsyncData<ScanResultInputData> => {\n  const api = useApi();\n\n  return useAsyncDataFromQuery({\n    queryKey:\n      params === skipToken\n        ? [skipToken]\n        : [\"scanDataframeInput\", params, \"scans-inv\"],\n    queryFn:\n      params === skipToken\n        ? skipToken\n        : () =>\n            api.getScannerDataframeInput(\n              params.scansDir,\n              params.scanPath,\n              params.scanner,\n              params.uuid\n            ),\n    staleTime: Infinity,\n  });\n};\n","import { skipToken } from \"@tanstack/react-query\";\n\nimport { AsyncData } from \"../../utils/asyncData\";\nimport { useScanDataframeInput } from \"../server/useScanDataframeInput\";\nimport { ScanResultInputData } from \"../types\";\n\nimport { useScanRoute } from \"./useScanRoute\";\nimport { useSelectedScanner } from \"./useSelectedScanner\";\n\nexport const useSelectedScanResultInputData = (\n  scanUuid?: string\n): AsyncData<ScanResultInputData> => {\n  const { resolvedScansDir, scanPath } = useScanRoute();\n\n  const scanner = useSelectedScanner();\n\n  return useScanDataframeInput(\n    resolvedScansDir && scanPath && scanner.data && scanUuid\n      ? {\n          scansDir: resolvedScansDir,\n          scanPath,\n          scanner: scanner.data,\n          uuid: scanUuid,\n        }\n      : skipToken\n  );\n};\n","import { skipToken } from \"@tanstack/react-query\";\n\nimport { useApi } from \"../../state/store\";\nimport { AsyncData } from \"../../utils/asyncData\";\nimport { useAsyncDataFromQuery } from \"../../utils/asyncDataFromQuery\";\n\ntype HasTranscriptParams = {\n  location: string;\n  id: string;\n};\n\nexport const useHasTranscript = (\n  params: HasTranscriptParams | typeof skipToken\n): AsyncData<boolean> => {\n  const api = useApi();\n\n  return useAsyncDataFromQuery({\n    queryKey: params === skipToken ? [skipToken] : [\"has_transcript\", params],\n    queryFn:\n      params === skipToken\n        ? skipToken\n        : () => api.hasTranscript(params.location, params.id),\n    staleTime: Infinity,\n  });\n};\n","import { clsx } from \"clsx\";\nimport { FC } from \"react\";\n\nimport { ANSIDisplay } from \"../../../components/AnsiDisplay\";\nimport { Card, CardBody, CardHeader } from \"../../../components/Card\";\n\nimport styles from \"./ErrorPanel.module.css\";\n\ninterface ErrorPanelProps {\n  error?: string;\n  traceback?: string;\n}\n\nexport const ErrorPanel: FC<ErrorPanelProps> = ({ error, traceback }) => {\n  return (\n    <Card className={clsx(styles.container)}>\n      <CardHeader type=\"modern\">Error</CardHeader>\n      <CardBody>\n        <div className={clsx(\"text-size-smaller\")}>{error}</div>\n\n        {traceback && (\n          <ANSIDisplay\n            className={clsx(styles.traceback, \"text-size-smaller\")}\n            output={traceback}\n          />\n        )}\n      </CardBody>\n    </Card>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC, ReactNode } from \"react\";\n\nimport { ModelUsage } from \"../../types/api-types\";\n\nimport { ModelUsagePanel } from \"./ModelUsagePanel\";\nimport styles from \"./TokenTable.module.css\";\n\ninterface TokenTableProps {\n  className?: string | string[];\n  children?: ReactNode;\n}\n\nexport const TokenTable: FC<TokenTableProps> = ({ className, children }) => {\n  return (\n    <table\n      className={clsx(\n        \"table\",\n        \"table-sm\",\n        \"text-size-smaller\",\n        styles.table,\n        className\n      )}\n    >\n      {children}\n    </table>\n  );\n};\n\nexport const TokenHeader = () => {\n  return (\n    <thead>\n      <tr>\n        <td></td>\n        <td\n          colSpan={3}\n          className={clsx(\n            \"card-subheading\",\n            styles.tableTokens,\n            \"text-size-small\",\n            \"text-style-label\",\n            \"text-style-secondary\"\n          )}\n          align=\"center\"\n        >\n          Tokens\n        </td>\n      </tr>\n      <tr>\n        <th\n          className={clsx(\n            styles.tableH,\n            \"text-sixe-small\",\n            \"text-style-label\",\n            \"text-style-secondary\"\n          )}\n        >\n          Model\n        </th>\n        <th\n          className={clsx(\n            styles.tableH,\n            \"text-sixe-small\",\n            \"text-style-label\",\n            \"text-style-secondary\"\n          )}\n        >\n          Usage\n        </th>\n      </tr>\n    </thead>\n  );\n};\n\ninterface TokenRowProps {\n  model: string;\n  usage: ModelUsage;\n}\n\nexport const TokenRow: FC<TokenRowProps> = ({ model, usage }) => {\n  return (\n    <tr>\n      <td>\n        <div className={clsx(styles.model, styles.cellContents)}>{model}</div>\n      </td>\n      <td>\n        <ModelUsagePanel usage={usage} className={clsx(styles.cellContents)} />\n      </td>\n    </tr>\n  );\n};\n","import { FC } from \"react\";\n\nimport { ModelUsage } from \"../../types/api-types\";\n\nimport { TokenHeader, TokenRow, TokenTable } from \"./TokenTable\";\n\ninterface ModelTokenTableProps {\n  model_usage: ModelUsage;\n  className?: string | string[];\n}\n\nexport const ModelTokenTable: FC<ModelTokenTableProps> = ({\n  model_usage,\n  className,\n}) => {\n  return (\n    <TokenTable className={className}>\n      <TokenHeader />\n      <tbody>\n        {Object.keys(model_usage).map((key) => {\n          if (!model_usage[key]) {\n            return null;\n          }\n          return <TokenRow key={key} model={key} usage={model_usage[key]} />;\n        })}\n      </tbody>\n    </TokenTable>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { Card, CardBody, CardHeader } from \"../../../components/Card\";\nimport { MetaDataGrid } from \"../../../components/content/MetaDataGrid\";\nimport { RecordTree } from \"../../../components/content/RecordTree\";\nimport { LabeledValue } from \"../../../components/LabeledValue\";\nimport { ModelTokenTable } from \"../../../components/usage/ModelTokenTable\";\nimport { formatNumber } from \"../../../utils/format\";\nimport { ScanResultData } from \"../../types\";\n\nimport styles from \"./InfoPanel.module.css\";\n\ninterface InfoPanelProps {\n  resultData?: ScanResultData;\n}\n\nexport const InfoPanel: FC<InfoPanelProps> = ({ resultData }) => {\n  return (\n    resultData && (\n      <div className={clsx(styles.container)}>\n        <Card>\n          <CardHeader label=\"Scanner Info\" type=\"modern\" />\n          <CardBody>\n            <ScannerInfoPanel resultData={resultData} />\n          </CardBody>\n        </Card>\n\n        <Card>\n          <CardHeader label=\"Transcript Info\" type=\"modern\" />\n          <CardBody>\n            <TranscriptInfoPanel resultData={resultData} />\n          </CardBody>\n        </Card>\n\n        {resultData?.scanModelUsage &&\n          Object.keys(resultData?.scanModelUsage).length > 0 && (\n            <Card>\n              <CardHeader label=\"Model Usage\" type=\"modern\" />\n              <CardBody>\n                {Object.keys(resultData?.scanModelUsage).map((key) => {\n                  if (!resultData?.scanModelUsage[key]) {\n                    return null;\n                  }\n                  return (\n                    <ModelTokenTable\n                      key={key}\n                      model_usage={resultData?.scanModelUsage[key]}\n                    />\n                  );\n                })}\n              </CardBody>\n            </Card>\n          )}\n        {resultData?.scanMetadata &&\n          Object.keys(resultData.scanMetadata).length > 0 && (\n            <Card>\n              <CardHeader label=\"Metadata\" type=\"modern\" />\n              <CardBody>\n                <RecordTree\n                  id={`scan-metadata-${resultData?.identifier}`}\n                  record={resultData?.scanMetadata || {}}\n                />\n              </CardBody>\n            </Card>\n          )}\n      </div>\n    )\n  );\n};\n\nexport const ScannerInfoPanel: FC<InfoPanelProps> = ({ resultData }) => {\n  return (\n    <div className={clsx(\"text-size-small\")}>\n      <div className={clsx(styles.scanInfo)}>\n        <LabeledValue label=\"Name\">{resultData?.scannerName}</LabeledValue>\n        {resultData?.scannerFile && resultData.scannerFile !== null && (\n          <LabeledValue label=\"File\">{resultData?.scannerFile}</LabeledValue>\n        )}\n        {(resultData?.scanTotalTokens || 0) > 0 && (\n          <LabeledValue label=\"Tokens\">\n            {resultData?.scanTotalTokens\n              ? formatNumber(resultData.scanTotalTokens)\n              : \"\"}\n          </LabeledValue>\n        )}\n      </div>\n      {resultData?.scanTags && resultData.scanTags.length > 0 && (\n        <LabeledValue label=\"Tags\">\n          {(resultData?.scanTags || []).join(\", \")}\n        </LabeledValue>\n      )}\n      {resultData?.scannerParams &&\n        Object.keys(resultData.scannerParams).length > 0 && (\n          <LabeledValue label=\"Params\">\n            <RecordTree\n              id={`scanner-params-${resultData?.identifier}`}\n              record={resultData?.scannerParams}\n            />\n          </LabeledValue>\n        )}\n    </div>\n  );\n};\n\nexport const TranscriptInfoPanel: FC<InfoPanelProps> = ({ resultData }) => {\n  return (\n    <div className={clsx(\"text-size-small\")}>\n      <MetaDataGrid\n        entries={{\n          \"source id\": resultData?.transcriptSourceId,\n          source_uri: resultData?.transcriptSourceUri,\n          date: resultData?.transcriptDate,\n          model: resultData?.transcriptModel,\n          agent: resultData?.transcriptAgent,\n          \"agent args\": resultData?.transcriptAgentArgs,\n          score: resultData?.transcriptScore,\n          success: resultData?.transcriptSuccess,\n          limit: resultData?.transcriptLimit,\n          error: resultData?.transcriptError,\n          message_count: resultData?.transcriptMessageCount,\n          total_time: resultData?.transcriptTotalTime,\n          total_tokens: resultData?.transcriptTotalTokens,\n        }}\n      />\n    </div>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { Card, CardBody } from \"../../../components/Card\";\nimport { RecordTree } from \"../../../components/content/RecordTree\";\nimport { LabeledValue } from \"../../../components/LabeledValue\";\nimport { NoContentsPanel } from \"../../../components/NoContentsPanel\";\nimport { ScanResultData } from \"../../types\";\n\nimport styles from \"./Metadata.module.css\";\n\ninterface MetadataPanelProps {\n  resultData?: ScanResultData;\n}\n\nexport const MetadataPanel: FC<MetadataPanelProps> = ({ resultData }) => {\n  const hasMetadata =\n    resultData && Object.keys(resultData?.metadata).length > 0;\n  return (\n    resultData && (\n      <div className={clsx(styles.container, \"text-size-base\")}>\n        {!hasMetadata && <NoContentsPanel text={\"No metadata available\"} />}\n        {hasMetadata && (\n          <Card>\n            <CardBody>\n              <LabeledValue label=\"Metadata\">\n                <RecordTree\n                  id={`result-metadata-${resultData.identifier}`}\n                  record={resultData.metadata || {}}\n                />\n              </LabeledValue>\n            </CardBody>\n          </Card>\n        )}\n      </div>\n    )\n  );\n};\n","import clsx from \"clsx\";\nimport { ButtonHTMLAttributes, FC, forwardRef, ReactNode } from \"react\";\n\nimport styles from \"./ColumnHeader.module.css\";\n\ninterface ColumnHeaderProps {\n  label?: string;\n  actions?: ReactNode;\n}\n\nexport const ColumnHeader: FC<ColumnHeaderProps> = ({ label, actions }) => {\n  return (\n    <div className={clsx(styles.header)}>\n      <div\n        className={clsx(\n          styles.label,\n          \"text-size-smallest\",\n          \"text-style-label\",\n          \"text-style-secondary\"\n        )}\n      >\n        {label}\n      </div>\n      {actions && <div className={styles.actions}>{actions}</div>}\n    </div>\n  );\n};\n\ninterface ColumnHeaderButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  icon: string;\n}\n\nexport const ColumnHeaderButton = forwardRef<\n  HTMLButtonElement,\n  ColumnHeaderButtonProps\n>(({ icon, className, ...rest }, ref) => {\n  return (\n    <button\n      ref={ref}\n      type=\"button\"\n      className={clsx(styles.iconButton, className)}\n      {...rest}\n    >\n      <i className={icon} />\n    </button>\n  );\n});\n\nColumnHeaderButton.displayName = \"ColumnHeaderButton\";\n","import clsx from \"clsx\";\nimport { FC, useCallback, useRef } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\n\nimport { ChatViewVirtualList } from \"../../../components/chat/ChatViewVirtualList\";\nimport { ApplicationIcons } from \"../../../components/icons\";\nimport { NoContentsPanel } from \"../../../components/NoContentsPanel\";\nimport { TranscriptView } from \"../../../components/transcript/TranscriptView\";\nimport { transcriptRoute } from \"../../../router/url\";\nimport { useStore } from \"../../../state/store\";\nimport {\n  ColumnHeader,\n  ColumnHeaderButton,\n} from \"../../components/ColumnHeader\";\nimport {\n  ScanResultInputData,\n  isEventInput,\n  isEventsInput,\n  isMessageInput,\n  isMessagesInput,\n  isTranscriptInput,\n  ScanResultData,\n} from \"../../types\";\n\nimport styles from \"./ResultBody.module.css\";\n\nexport interface ResultBodyProps {\n  resultData: ScanResultData;\n  inputData: ScanResultInputData;\n  transcriptDir: string;\n  hasTranscript: boolean;\n}\n\nexport const ResultBody: FC<ResultBodyProps> = ({\n  resultData,\n  inputData,\n  transcriptDir,\n  hasTranscript,\n}) => {\n  const scrollRef = useRef<HTMLDivElement | null>(null);\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n\n  // Get message or event ID from query params\n  const initialMessageId = searchParams.get(\"message\");\n  const initialEventId = searchParams.get(\"event\");\n\n  const highlightLabeled = useStore((state) => state.highlightLabeled);\n\n  const handleNavigateToTranscript = useCallback(() => {\n    if (transcriptDir && resultData.transcriptId) {\n      void navigate(transcriptRoute(transcriptDir, resultData.transcriptId));\n    }\n  }, [navigate, transcriptDir, resultData.transcriptId]);\n\n  // Only show the transcript button when we have both transcriptsDir and transcriptId\n  const canNavigateToTranscript =\n    hasTranscript && transcriptDir.length > 0 && resultData.transcriptId;\n  const transcriptAction = canNavigateToTranscript ? (\n    <ColumnHeaderButton\n      icon={ApplicationIcons.transcript}\n      onClick={handleNavigateToTranscript}\n      title=\"View complete transcript\"\n    />\n  ) : undefined;\n\n  return (\n    <div className={styles.container}>\n      <ColumnHeader label=\"Input\" actions={transcriptAction} />\n      <div ref={scrollRef} className={clsx(styles.scrollable)}>\n        <InputRenderer\n          resultData={resultData}\n          inputData={inputData}\n          scrollRef={scrollRef}\n          initialMessageId={initialMessageId}\n          initialEventId={initialEventId}\n          highlightLabeled={highlightLabeled}\n        />\n      </div>\n    </div>\n  );\n};\n\ninterface InputRendererProps {\n  className?: string | string[];\n  resultData?: ScanResultData;\n  inputData: ScanResultInputData;\n  scrollRef?: React.RefObject<HTMLDivElement | null>;\n  initialMessageId?: string | null;\n  initialEventId?: string | null;\n  highlightLabeled?: boolean;\n}\n\nconst InputRenderer: FC<InputRendererProps> = ({\n  resultData,\n  inputData,\n  className,\n  scrollRef,\n  initialMessageId,\n  initialEventId,\n  highlightLabeled,\n}) => {\n  if (isTranscriptInput(inputData)) {\n    if (inputData.input.messages && inputData.input.messages.length > 0) {\n      const labels = resultData?.messageReferences.reduce(\n        (acc, ref) => {\n          if (ref.cite) {\n            acc[ref.id] = ref.cite;\n          }\n          return acc;\n        },\n        {} as Record<string, string>\n      );\n\n      return (\n        <ChatViewVirtualList\n          messages={inputData.input.messages || []}\n          allowLinking={false}\n          id={\"scan-input-virtual-list\"}\n          toolCallStyle={\"complete\"}\n          indented={true}\n          className={className}\n          scrollRef={scrollRef}\n          initialMessageId={initialMessageId}\n          showLabels={true}\n          highlightLabeled={highlightLabeled}\n          labels={labels}\n        />\n      );\n    } else if (inputData.input.events && inputData.input.events.length > 0) {\n      return (\n        <TranscriptView\n          id={\"scan-input-transcript\"}\n          events={inputData.input.events}\n          scrollRef={scrollRef}\n          initialEventId={initialEventId}\n        />\n      );\n    } else {\n      return <NoContentsPanel text=\"No transcript input available\" />;\n    }\n  } else if (isMessagesInput(inputData)) {\n    return (\n      <ChatViewVirtualList\n        messages={inputData.input}\n        allowLinking={false}\n        id={\"scan-input-virtual-list\"}\n        toolCallStyle={\"complete\"}\n        indented={true}\n        className={className}\n        scrollRef={scrollRef}\n        initialMessageId={initialMessageId}\n      />\n    );\n  } else if (isMessageInput(inputData)) {\n    return (\n      <ChatViewVirtualList\n        messages={[inputData.input]}\n        allowLinking={false}\n        id={\"scan-input-virtual-list\"}\n        toolCallStyle={\"complete\"}\n        indented={true}\n        className={className}\n        scrollRef={scrollRef}\n        initialMessageId={initialMessageId}\n      />\n    );\n  } else if (isEventsInput(inputData)) {\n    return (\n      <TranscriptView\n        id={\"scan-input-transcript\"}\n        events={inputData.input}\n        scrollRef={scrollRef}\n        initialEventId={initialEventId}\n      />\n    );\n  } else if (isEventInput(inputData)) {\n    return (\n      <TranscriptView\n        id={\"scan-input-transcript\"}\n        events={[inputData.input]}\n        scrollRef={scrollRef}\n        initialEventId={initialEventId}\n      />\n    );\n  } else {\n    return <div>Unsupported Input Type</div>;\n  }\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { MetaDataGrid } from \"../../../components/content/MetaDataGrid\";\nimport { MarkdownReference } from \"../../../components/MarkdownDivWithReferences\";\nimport { NoContentsPanel } from \"../../../components/NoContentsPanel\";\nimport { Explanation } from \"../../components/Explanation\";\nimport { ValidationResult } from \"../../components/ValidationResult\";\nimport { Value } from \"../../components/Value\";\nimport { ScanResultData, ScanResultInputData } from \"../../types\";\nimport { useMarkdownRefs } from \"../../utils/refs\";\n\nimport styles from \"./ResultSidebar.module.css\";\n\ninterface ResultSidebarProps {\n  inputData?: ScanResultInputData;\n  resultData?: ScanResultData;\n}\n\nexport const ResultSidebar: FC<ResultSidebarProps> = ({\n  inputData,\n  resultData,\n}) => {\n  const refs: MarkdownReference[] = useMarkdownRefs(resultData, inputData);\n\n  if (!resultData) {\n    return <NoContentsPanel text=\"No result to display.\" />;\n  }\n\n  return (\n    <div className={clsx(styles.sidebar)}>\n      <div className={clsx(styles.container, \"text-size-small\")}>\n        {resultData.label && (\n          <>\n            <div className={clsx(\"text-style-label\", \"text-style-secondary\")}>\n              Label\n            </div>\n            <div>{resultData.label}</div>\n          </>\n        )}\n        <div className={clsx(\"text-style-label\", \"text-style-secondary\")}>\n          Value\n        </div>\n        <div\n          className={clsx(\n            resultData.validationResult !== undefined\n              ? styles.values\n              : undefined\n          )}\n        >\n          <Value\n            summary={resultData}\n            style=\"block\"\n            maxTableSize={1000}\n            interactive={true}\n            references={refs}\n            options={{ previewRefsOnHover: false }}\n          />\n          {resultData.validationResult !== undefined &&\n          resultData.validationResult !== null ? (\n            <div className={clsx(styles.validation)}>\n              <div\n                className={clsx(\n                  \"text-style-label\",\n                  \"text-style-secondary\",\n                  styles.validationLabel\n                )}\n              >\n                Validation\n              </div>\n              <ValidationResult\n                result={resultData.validationResult}\n                target={resultData.validationTarget}\n                label={resultData.label}\n              />\n            </div>\n          ) : undefined}\n        </div>\n        <div className={clsx(styles.colspan)}>\n          <div className={clsx(\"text-style-label\", \"text-style-secondary\")}>\n            Explanation\n          </div>\n          <Explanation\n            summary={resultData}\n            references={refs}\n            options={{ previewRefsOnHover: false }}\n          />\n        </div>\n        {resultData.metadata && Object.keys(resultData.metadata).length > 0 && (\n          <>\n            <div className={clsx(\"text-style-label\", \"text-style-secondary\")}>\n              Metadata\n            </div>\n            <div>\n              <MetaDataGrid\n                entries={resultData.metadata}\n                references={refs}\n                options={{ previewRefsOnHover: false }}\n              />\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { ScanResultData, ScanResultInputData } from \"../../types\";\n\nimport { ResultBody } from \"./ResultBody\";\nimport styles from \"./ResultPanel.module.css\";\nimport { ResultSidebar } from \"./ResultSidebar\";\n\ninterface ResultPanelProps {\n  resultData: ScanResultData;\n  inputData: ScanResultInputData | undefined;\n  transcriptDir: string;\n  hasTranscript: boolean;\n}\n\nexport const ResultPanel: FC<ResultPanelProps> = ({\n  resultData,\n  inputData,\n  transcriptDir,\n  hasTranscript,\n}) => (\n  <div className={clsx(styles.container, \"text-size-base\")}>\n    <ResultSidebar inputData={inputData} resultData={resultData} />\n    {inputData ? (\n      <ResultBody\n        resultData={resultData}\n        inputData={inputData}\n        transcriptDir={transcriptDir}\n        hasTranscript={hasTranscript}\n      />\n    ) : (\n      <div>No Input Available</div>\n    )}\n  </div>\n);\n","import clsx from \"clsx\";\nimport { FC, ReactNode } from \"react\";\n\nimport { EventType } from \"../../components/transcript/types\";\nimport {\n  Event,\n  ChatMessage,\n  Status,\n  Transcript,\n  AppConfig,\n} from \"../../types/api-types\";\nimport { TaskName } from \"../components/TaskName\";\nimport { projectOrAppAliasedPath } from \"../server/useAppConfig\";\nimport {\n  ScanResultInputData,\n  isEventInput,\n  isEventsInput,\n  isMessageInput,\n  isMessagesInput,\n  isTranscriptInput,\n  MessageType,\n} from \"../types\";\n\nimport styles from \"./ScannerResultHeader.module.css\";\n\ninterface ScannerResultHeaderProps {\n  scan?: Status;\n  inputData?: ScanResultInputData;\n  appConfig: AppConfig;\n}\n\ninterface Column {\n  label: string;\n  value: ReactNode;\n  className?: string | string[];\n}\n\nexport const ScannerResultHeader: FC<ScannerResultHeaderProps> = ({\n  scan,\n  inputData,\n  appConfig,\n}) => {\n  const columns = colsForResult(appConfig, inputData, scan) || [];\n\n  return (\n    <div className={clsx(styles.header, classForCols(columns.length))}>\n      {columns.map((col) => {\n        return (\n          <div\n            key={`header-label-${col.label}`}\n            className={clsx(\n              \"text-size-smallest\",\n              \"text-style-label\",\n              \"text-style-secondary\",\n              styles.label,\n              col.className\n            )}\n          >\n            {col.label}\n          </div>\n        );\n      })}\n\n      {columns.map((col) => {\n        return (\n          <div\n            key={`header-val-${col.label}`}\n            className={clsx(\"text-size-small\", styles.value, col.className)}\n          >\n            {col.value}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nconst classForCols = (numCols: number) => {\n  return clsx(\n    numCols === 1\n      ? styles.oneCol\n      : numCols === 2\n        ? styles.twoCol\n        : numCols === 3\n          ? styles.threeCol\n          : numCols === 4\n            ? styles.fourCol\n            : numCols === 5\n              ? styles.fiveCol\n              : styles.sixCol\n  );\n};\n\nconst colsForResult: (\n  appConfig: AppConfig,\n  inputData?: ScanResultInputData,\n  status?: Status\n) => Column[] | undefined = (appConfig, inputData, status) => {\n  if (!inputData) {\n    return [];\n  }\n  if (isTranscriptInput(inputData)) {\n    return transcriptCols(appConfig, inputData.input, status);\n  } else if (isMessageInput(inputData)) {\n    return messageCols(inputData.input, status);\n  } else if (isMessagesInput(inputData)) {\n    return messagesCols(inputData.input);\n  } else if (isEventInput(inputData)) {\n    return eventCols(inputData.input);\n  } else if (isEventsInput(inputData)) {\n    return eventsCols(inputData.input);\n  } else {\n    return [];\n  }\n};\n\nconst transcriptCols = (\n  appConfig: AppConfig,\n  transcript: Transcript,\n  status?: Status\n) => {\n  // Read values from the transcript directly, falling back to metadata\n  // The metadata was previously used to store these values before they were\n  // added to the main Transcript schema (so we're doing this mainly for backwards\n  // compatibility with old scan results)\n  // Source info\n  const sourceUri =\n    transcript.source_uri ||\n    (transcript.metadata?.log as string | undefined) ||\n    \"\";\n\n  // Coerce this to a URI\n  let resolvedSourceUrl = sourceUri;\n  if (resolvedSourceUrl && resolvedSourceUrl.startsWith(\"/\")) {\n    resolvedSourceUrl = `file://${resolvedSourceUrl}`;\n  }\n  const displaySourceUri = projectOrAppAliasedPath(\n    appConfig,\n    resolvedSourceUrl\n  );\n\n  // Model info\n  const transcriptModel =\n    transcript.model ||\n    (transcript.metadata?.model as string | undefined) ||\n    \"\";\n  const scanningModel = status?.spec.model?.model;\n\n  // Task information\n  const taskSet =\n    transcript.task_set ||\n    (transcript.metadata?.task_name as string | undefined) ||\n    \"\";\n  const taskId =\n    transcript.task_id || (transcript.metadata?.id as string | undefined) || \"\";\n  const taskRepeat =\n    transcript.task_repeat || (transcript.metadata?.epoch as number) || -1;\n\n  const cols: Column[] = [\n    {\n      label: \"Task\",\n      value: (\n        <TaskName taskSet={taskSet} taskId={taskId} taskRepeat={taskRepeat} />\n      ),\n    },\n    {\n      label: \"Source\",\n      value: displaySourceUri,\n    },\n    {\n      label: \"Model\",\n      value: transcriptModel,\n    },\n  ];\n\n  if (status?.spec.model?.model) {\n    cols.push({\n      label: \"Scanning Model\",\n      value: scanningModel,\n    });\n  }\n\n  return cols;\n};\n\nconst messageCols = (message: MessageType, status?: Status) => {\n  const cols: Column[] = [\n    {\n      label: \"Message ID\",\n      value: message.id,\n    },\n  ];\n\n  if (message.role === \"assistant\") {\n    cols.push({\n      label: \"Model\",\n      value: message.model,\n    });\n    cols.push({\n      label: \"Tool Calls\",\n      value: ((message.tool_calls as []) || []).length,\n    });\n  } else {\n    cols.push({\n      label: \"Role\",\n      value: message.role,\n    });\n  }\n\n  if (status?.spec.model?.model) {\n    cols.push({\n      label: \"Scanning Model\",\n      value: status.spec.model.model,\n    });\n  }\n\n  return cols;\n};\n\nconst messagesCols = (messages: ChatMessage[]): Column[] => {\n  return [\n    {\n      label: \"Message Count\",\n      value: messages.length,\n    },\n  ];\n};\n\nconst eventCols = (event: EventType): Column[] => {\n  return [\n    {\n      label: \"Event Type\",\n      value: event.event,\n    },\n    {\n      label: \"Timestamp\",\n      value: event.timestamp\n        ? new Date(event.timestamp).toLocaleString()\n        : undefined,\n    },\n  ];\n};\n\nconst eventsCols = (events: Event[]): Column[] => {\n  return [\n    {\n      label: \"Event Count\",\n      value: events.length,\n    },\n  ];\n};\n","import { FC, useMemo } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport { useLoggingNavigate } from \"../../debugging/navigationDebugging\";\nimport { scanResultRoute } from \"../../router/url\";\nimport { useStore } from \"../../state/store\";\nimport { NextPreviousNav } from \"../components/NextPreviousNav\";\nimport { useScanRoute } from \"../hooks/useScanRoute\";\nimport { IdentifierInfo, resultIdentifier } from \"../utils/results\";\n\nexport const ScannerResultNav: FC = () => {\n  const navigate = useLoggingNavigate(\"ScannerResultNav\");\n  const [searchParams] = useSearchParams();\n  const { scansDir, scanPath, scanResultUuid } = useScanRoute();\n\n  const visibleScannerResults = useStore(\n    (state) => state.visibleScannerResults\n  );\n\n  const currentIndex = useMemo(() => {\n    if (!visibleScannerResults) {\n      return -1;\n    }\n    return visibleScannerResults.findIndex(\n      (s) => s.identifier === scanResultUuid\n    );\n  }, [visibleScannerResults, scanResultUuid]);\n\n  const hasPrevious = currentIndex > 0;\n  const hasNext =\n    visibleScannerResults &&\n    currentIndex >= 0 &&\n    currentIndex < visibleScannerResults.length - 1;\n\n  const handlePrevious = () => {\n    if (!hasPrevious || !visibleScannerResults) {\n      return;\n    }\n    const previousResult = visibleScannerResults[currentIndex - 1];\n    if (!scansDir) {\n      return;\n    }\n    const route = scanResultRoute(\n      scansDir,\n      scanPath,\n      previousResult?.identifier,\n      searchParams\n    );\n    void navigate(route);\n  };\n\n  const handleNext = () => {\n    if (!hasNext || !visibleScannerResults) {\n      return;\n    }\n    const nextResult = visibleScannerResults[currentIndex + 1];\n    if (!scansDir) {\n      return;\n    }\n    const route = scanResultRoute(\n      scansDir,\n      scanPath,\n      nextResult?.identifier,\n      searchParams\n    );\n    void navigate(route);\n  };\n\n  const result =\n    visibleScannerResults && currentIndex !== -1\n      ? visibleScannerResults[currentIndex]\n      : undefined;\n\n  return (\n    <NextPreviousNav\n      onPrevious={handlePrevious}\n      onNext={handleNext}\n      hasPrevious={hasPrevious}\n      hasNext={!!hasNext}\n    >\n      <span className=\"text-size-smallest\">\n        {visibleScannerResults && currentIndex !== -1\n          ? printIdentifier(resultIdentifier(result), result?.label)\n          : undefined}\n      </span>\n    </NextPreviousNav>\n  );\n};\n\nconst printIdentifier = (\n  identifier: IdentifierInfo,\n  label?: string\n): string => {\n  let val = \"\";\n  if (identifier.epoch) {\n    val = `${identifier.id} epoch ${identifier.epoch}`;\n  } else {\n    val = String(identifier.id);\n  }\n\n  if (label && label.length > 0) {\n    val += ` (${label})`;\n  }\n  return val;\n};\n","import clsx from \"clsx\";\nimport { FC, useRef } from \"react\";\n\nimport { TranscriptView } from \"../../../components/transcript/TranscriptView\";\nimport { EventNode, EventType } from \"../../../components/transcript/types\";\nimport { ScanResultData } from \"../../types\";\n\nimport styles from \"./TranscriptPanel.module.css\";\n\ninterface TranscriptPanelProps {\n  id: string;\n  resultData?: ScanResultData;\n  nodeFilter?: (node: EventNode<EventType>[]) => EventNode<EventType>[];\n}\n\nexport const TranscriptPanel: FC<TranscriptPanelProps> = ({\n  id,\n  resultData,\n  nodeFilter,\n}) => {\n  const scrollRef = useRef<HTMLDivElement | null>(null);\n\n  return (\n    <div ref={scrollRef} className={clsx(styles.container)}>\n      <TranscriptView\n        id={id}\n        events={resultData?.scanEvents || []}\n        scrollRef={scrollRef}\n        nodeFilter={nodeFilter}\n      />\n    </div>\n  );\n};\n","import { skipToken } from \"@tanstack/react-query\";\nimport { VscodeSplitLayout } from \"@vscode-elements/react-elements\";\nimport { clsx } from \"clsx\";\nimport { FC, ReactNode, useCallback, useEffect, useMemo } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport { ExtendedFindProvider } from \"../../components/ExtendedFindProvider\";\nimport { ApplicationIcons } from \"../../components/icons\";\nimport JSONPanel from \"../../components/JsonPanel\";\nimport { LoadingBar } from \"../../components/LoadingBar\";\nimport { TabPanel, TabSet } from \"../../components/TabSet\";\nimport { ToolButton } from \"../../components/ToolButton\";\nimport { EventNode, EventType } from \"../../components/transcript/types\";\nimport { useDocumentTitle } from \"../../hooks/useDocumentTitle\";\nimport {\n  getScannerParam,\n  getValidationParam,\n  updateValidationParam,\n} from \"../../router/url\";\nimport { useStore } from \"../../state/store\";\nimport { ScansNavbar } from \"../components/ScansNavbar\";\nimport { useScanRoute } from \"../hooks/useScanRoute\";\nimport { useSelectedScan } from \"../hooks/useSelectedScan\";\nimport { useSelectedScanResultData } from \"../hooks/useSelectedScanResultData\";\nimport { useSelectedScanResultInputData } from \"../hooks/useSelectedScanResultInputData\";\nimport { useAppConfig } from \"../server/useAppConfig\";\nimport { useHasTranscript } from \"../server/useHasTranscript\";\nimport { isTranscriptInput, ScanResultData } from \"../types\";\nimport { getScanDisplayName } from \"../utils/scan\";\nimport { getTranscriptDisplayName } from \"../utils/transcript\";\nimport { useScansDir } from \"../utils/useScansDir\";\nimport { useTranscriptsDir } from \"../utils/useTranscriptsDir\";\nimport { ValidationCaseEditor } from \"../validation/components/ValidationCaseEditor\";\n\nimport { ErrorPanel } from \"./error/ErrorPanel\";\nimport { InfoPanel } from \"./info/InfoPanel\";\nimport { MetadataPanel } from \"./metadata/MetadataPanel\";\nimport { ResultPanel } from \"./result/ResultPanel\";\nimport { ScannerResultHeader } from \"./ScannerResultHeader\";\nimport { ScannerResultNav } from \"./ScannerResultNav\";\nimport styles from \"./ScannerResultPanel.module.css\";\nimport { TranscriptPanel } from \"./transcript/TranscriptPanel\";\n\nconst kTabIdResult = \"Result\";\nconst kTabIdError = \"Error\";\nconst kTabIdInput = \"Input\";\nconst kTabIdInfo = \"Info\";\nconst kTabIdJson = \"JSON\";\nconst kTabIdTranscript = \"transcript\";\nconst kTabIdMetadata = \"Metadata\";\n\nexport const ScannerResultPanel: FC = () => {\n  // Url data\n  const { scanResultUuid } = useScanRoute();\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  // Required server data\n  const { loading: scanLoading, data: selectedScan } = useSelectedScan();\n  const { displayScansDir, resolvedScansDirSource, setScansDir } =\n    useScansDir(true);\n  // Sync URL query param with store state\n  const setSelectedScanner = useStore((state) => state.setSelectedScanner);\n  useEffect(() => {\n    const scannerParam = getScannerParam(searchParams);\n    if (scannerParam) {\n      setSelectedScanner(scannerParam);\n    }\n  }, [searchParams, setSelectedScanner]);\n\n  // Sync displayed result with URL - this ensures both selectedScanResult\n  // (for list highlighting) and displayedScanResult (for route restoration)\n  // stay in sync with what's actually being viewed\n  const setSelectedScanResult = useStore(\n    (state) => state.setSelectedScanResult\n  );\n  const setDisplayedScanResult = useStore(\n    (state) => state.setDisplayedScanResult\n  );\n  useEffect(() => {\n    if (scanResultUuid) {\n      setSelectedScanResult(scanResultUuid);\n      setDisplayedScanResult(scanResultUuid);\n    }\n  }, [scanResultUuid, setSelectedScanResult, setDisplayedScanResult]);\n\n  const appConfig = useAppConfig();\n\n  // Validation sidebar - URL is the source of truth\n  const validationSidebarCollapsed = !getValidationParam(searchParams);\n\n  const toggleValidationSidebar = useCallback(() => {\n    setSearchParams((prevParams) => {\n      const isCurrentlyOpen = getValidationParam(prevParams);\n      return updateValidationParam(prevParams, !isCurrentlyOpen);\n    });\n  }, [setSearchParams]);\n\n  const selectedTab = useStore((state) => state.selectedResultTab);\n  const visibleScannerResults = useStore(\n    (state) => state.visibleScannerResults\n  );\n\n  const setSelectedResultTab = useStore((state) => state.setSelectedResultTab);\n  const { data: selectedResult, loading: resultLoading } =\n    useSelectedScanResultData(scanResultUuid);\n\n  const { loading: inputLoading, data: inputData } =\n    useSelectedScanResultInputData(selectedResult?.uuid);\n\n  // Set document title with task name and scan location\n  const taskName =\n    inputData && isTranscriptInput(inputData)\n      ? getTranscriptDisplayName(inputData.input)\n      : undefined;\n  useDocumentTitle(\n    taskName,\n    getScanDisplayName(selectedScan, appConfig.scans.dir),\n    \"Scans\"\n  );\n\n  const { resolvedTranscriptsDir } = useTranscriptsDir(false);\n  const { loading: hasTranscriptLoading, data: hasTranscript } =\n    useHasTranscript(\n      !selectedResult\n        ? skipToken\n        : { id: selectedResult.transcriptId, location: resolvedTranscriptsDir }\n    );\n\n  // Sync URL tab parameter with store on mount and URL changes\n  useEffect(() => {\n    const tabParam = searchParams.get(\"tab\");\n    if (tabParam) {\n      // Valid tab IDs\n      const validTabs = [\n        kTabIdResult,\n        kTabIdInput,\n        kTabIdInfo,\n        kTabIdJson,\n        kTabIdTranscript,\n      ];\n      if (validTabs.includes(tabParam)) {\n        setSelectedResultTab(tabParam);\n      }\n    }\n  }, [searchParams, setSelectedResultTab]);\n\n  const handleTabChange = (tabId: string) => {\n    setSelectedResultTab(tabId);\n    const newParams = new URLSearchParams(searchParams);\n    newParams.set(\"tab\", tabId);\n    setSearchParams(newParams);\n  };\n\n  // TODO: lint react-hooks/preserve-manual-memoization - the lint seems to be a bug in the rule that doesn't account for the ?\n  // However, this useMemo feels like a premature optimization. I think it should go\n  // eslint-disable-next-line react-hooks/preserve-manual-memoization\n  const showEvents = useMemo(() => {\n    if (!selectedResult?.scanEvents) {\n      return false;\n    }\n\n    const hasNonSpanEvents = selectedResult.scanEvents.some((event) => {\n      return event.event !== \"span_begin\" && event.event !== \"span_end\";\n    });\n\n    return hasNonSpanEvents;\n  }, [selectedResult?.scanEvents]);\n\n  const hasError =\n    selectedResult?.scanError !== undefined &&\n    selectedResult?.scanError !== null;\n\n  const highlightLabeled = useStore((state) => state.highlightLabeled);\n  const setHighlightLabeled = useStore((state) => state.setHighlightLabeled);\n  const toggleHighlightLabeled = useCallback(() => {\n    setHighlightLabeled(!highlightLabeled);\n  }, [highlightLabeled, setHighlightLabeled]);\n\n  const tools = useMemo(() => {\n    const toolButtons: ReactNode[] = [];\n\n    // Existing highlight refs button (keep as-is)\n    if (\n      selectedTab === kTabIdInput &&\n      selectedResult?.inputType === \"transcript\" &&\n      selectedResult?.messageReferences.length > 0\n    ) {\n      toolButtons.push(\n        <ToolButton\n          icon={ApplicationIcons.highlight}\n          key=\"highlight-labeled\"\n          latched={!!highlightLabeled}\n          onClick={toggleHighlightLabeled}\n          label=\"Highlight Refs\"\n        />\n      );\n    }\n\n    // Validation button - only show when transcriptId is available\n    if (selectedResult?.transcriptId) {\n      toolButtons.push(\n        <ToolButton\n          key=\"validation-sidebar-toggle\"\n          label=\"Validation\"\n          icon={ApplicationIcons.edit}\n          onClick={toggleValidationSidebar}\n          title={\n            validationSidebarCollapsed\n              ? \"Show validation editor\"\n              : \"Hide validation editor\"\n          }\n          subtle={true}\n        />\n      );\n    }\n\n    return toolButtons;\n  }, [\n    highlightLabeled,\n    toggleHighlightLabeled,\n    selectedTab,\n    selectedResult,\n    toggleValidationSidebar,\n    validationSidebarCollapsed,\n  ]);\n\n  const renderTabSet = (resultData: ScanResultData) => (\n    <TabSet\n      id={\"scan-result-tabs\"}\n      type=\"pills\"\n      tabPanelsClassName={clsx(styles.tabSet)}\n      tabControlsClassName={clsx(styles.tabControl)}\n      className={clsx(styles.tabs)}\n      tools={tools}\n    >\n      {hasError ? (\n        <TabPanel\n          id={kTabIdError}\n          selected={selectedTab === kTabIdError || selectedTab === undefined}\n          title=\"Error\"\n          onSelected={() => {\n            handleTabChange(kTabIdError);\n          }}\n        >\n          <ErrorPanel\n            error={resultData.scanError}\n            traceback={resultData.scanErrorTraceback}\n          />\n        </TabPanel>\n      ) : undefined}\n      {!hasError ? (\n        <TabPanel\n          id={kTabIdResult}\n          selected={\n            selectedTab === kTabIdResult ||\n            (!hasError && selectedTab === undefined)\n          }\n          title=\"Result\"\n          scrollable={false}\n          onSelected={() => {\n            handleTabChange(kTabIdResult);\n          }}\n          className={styles.fullHeight}\n        >\n          {resultData && inputData && (\n            <ResultPanel\n              resultData={resultData}\n              inputData={inputData}\n              transcriptDir={resolvedTranscriptsDir}\n              hasTranscript={!!hasTranscript}\n            />\n          )}\n        </TabPanel>\n      ) : undefined}\n      {showEvents ? (\n        <TabPanel\n          id={kTabIdTranscript}\n          selected={selectedTab === kTabIdTranscript}\n          title=\"Events\"\n          onSelected={() => {\n            handleTabChange(kTabIdTranscript);\n          }}\n        >\n          <TranscriptPanel\n            id=\"scan-transcript\"\n            resultData={resultData}\n            nodeFilter={skipScanSpan}\n          />\n        </TabPanel>\n      ) : undefined}\n      <TabPanel\n        id={kTabIdMetadata}\n        selected={selectedTab === kTabIdMetadata}\n        title=\"Metadata\"\n        onSelected={() => {\n          handleTabChange(kTabIdMetadata);\n        }}\n      >\n        <MetadataPanel resultData={resultData} />\n      </TabPanel>\n      <TabPanel\n        id={kTabIdInfo}\n        selected={selectedTab === kTabIdInfo}\n        title=\"Info\"\n        onSelected={() => {\n          handleTabChange(kTabIdInfo);\n        }}\n      >\n        <InfoPanel resultData={resultData} />\n      </TabPanel>\n      <TabPanel\n        id={kTabIdJson}\n        selected={selectedTab === kTabIdJson}\n        title=\"JSON\"\n        onSelected={() => {\n          handleTabChange(kTabIdJson);\n        }}\n      >\n        <JSONPanel\n          id=\"scan-result-json-contents\"\n          data={resultData}\n          simple={true}\n          className={styles.json}\n        />\n      </TabPanel>\n    </TabSet>\n  );\n\n  return (\n    <div className={clsx(styles.root)}>\n      <ScansNavbar\n        scansDir={displayScansDir}\n        scansDirSource={resolvedScansDirSource}\n        setScansDir={setScansDir}\n      >\n        {visibleScannerResults.length > 0 && <ScannerResultNav />}\n      </ScansNavbar>\n      <LoadingBar\n        loading={\n          scanLoading || resultLoading || inputLoading || hasTranscriptLoading\n        }\n      />\n      <ScannerResultHeader\n        inputData={inputData}\n        scan={selectedScan}\n        appConfig={appConfig}\n      />\n\n      {selectedResult && (\n        <ExtendedFindProvider>\n          <div\n            className={clsx(\n              styles.contentArea,\n              !validationSidebarCollapsed && styles.withValidation\n            )}\n          >\n            {validationSidebarCollapsed || !selectedResult.transcriptId ? (\n              <div className={styles.tabSetWrapper}>\n                {renderTabSet(selectedResult)}\n              </div>\n            ) : (\n              <VscodeSplitLayout\n                className={styles.splitLayout}\n                fixedPane=\"end\"\n                initialHandlePosition=\"80%\"\n                minEnd=\"180px\"\n                minStart=\"200px\"\n              >\n                <div slot=\"start\" className={styles.splitStart}>\n                  {renderTabSet(selectedResult)}\n                </div>\n                <div slot=\"end\" className={styles.validationSidebar}>\n                  <ValidationCaseEditor\n                    transcriptId={selectedResult.transcriptId}\n                  />\n                </div>\n              </VscodeSplitLayout>\n            )}\n          </div>\n        </ExtendedFindProvider>\n      )}\n    </div>\n  );\n};\n\nconst skipScanSpan = (\n  nodes: EventNode<EventType>[]\n): EventNode<EventType>[] => {\n  if (nodes.length === 1 && nodes[0]?.event.event === \"span_begin\") {\n    return nodes[0].children;\n  }\n  return nodes;\n};\n"],"names":["useState","useMemo","filtered","useEffect","traceback","styles","jsx","jsxs","model","actions","forwardRef","useRef","useCallback","Fragment"],"mappings":"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"}