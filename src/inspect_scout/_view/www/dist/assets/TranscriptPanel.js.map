{"version":3,"file":"TranscriptPanel.js","sources":["../../src/utils/router.ts","../../src/app/server/useAdjacentTranscriptIds.ts","../../src/app/server/useTranscript.ts","../../src/components/StickyScroll.tsx","../../src/app/utils/messages.ts","../../src/app/transcript/hooks/useTranscriptColumnFilter.ts","../../src/app/transcript/TranscriptFilterPopover.tsx","../../src/app/transcript/TranscriptBody.tsx","../../src/app/transcript/TranscriptNav.tsx","../../src/app/components/HeadingGrid.tsx","../../src/app/transcript/TranscriptTitle.tsx","../../src/app/transcript/TranscriptPanel.tsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\n\nexport function useRequiredParams<T extends string>(\n  ...keys: T[]\n): Record<T, string> {\n  const params = useParams();\n  const result = {} as Record<T, string>;\n\n  for (const key of keys) {\n    const value = params[key];\n    if (!value) {\n      throw new Error(`Missing required route param: ${key}`);\n    }\n    result[key] = value;\n  }\n\n  return result;\n}\n","import { skipToken } from \"@tanstack/react-query\";\nimport { SortingState } from \"@tanstack/react-table\";\nimport { useEffect, useMemo } from \"react\";\n\nimport { Condition } from \"../../query\";\nimport { TranscriptsResponse } from \"../../types/api-types\";\nimport { AsyncData, data, loading } from \"../../utils/asyncData\";\n\nimport { useServerTranscriptsInfinite } from \"./useServerTranscriptsInfinite\";\n\ntype Position = { pageIndex: number; itemIndex: number };\n\n/**\n * Returns prev/next transcript IDs relative to the given ID.\n *\n * Note: prev is undefined when viewing the first loaded item.\n * Reverse paging not yet supported - will need backend prev_cursor.\n */\nexport const useAdjacentTranscriptIds = (\n  id: string,\n  location?: string | null,\n  pageSize?: number,\n  filter?: Condition,\n  sorting?: SortingState\n): AsyncData<[string | undefined, string | undefined]> => {\n  const {\n    data: queryData,\n    error,\n    isLoading,\n    hasNextPage,\n    isFetchingNextPage,\n    fetchNextPage,\n  } = useServerTranscriptsInfinite(\n    location ? { location, pageSize, filter, sorting } : skipToken\n  );\n\n  const pages = queryData?.pages;\n  const position = useMemo(\n    () => (pages ? findPosition(pages, id) : null),\n    [pages, id]\n  );\n\n  const needsNextPage =\n    pages !== undefined &&\n    position !== null &&\n    isLastLoadedItem(pages, position) &&\n    hasNextPage &&\n    !isFetchingNextPage;\n\n  useEffect(() => {\n    if (needsNextPage) {\n      fetchNextPage().catch(console.error);\n    }\n  }, [needsNextPage, fetchNextPage]);\n\n  if (isLoading) {\n    return loading;\n  }\n\n  if (error) {\n    return { loading: false, error };\n  }\n\n  if (pages === undefined || position === null) {\n    // ID not found in loaded pages - might need more data\n    return loading;\n  }\n\n  return data(getAdjacentIds(pages, position));\n};\n\nconst findPosition = (\n  pages: TranscriptsResponse[],\n  id: string\n): Position | null => {\n  for (let p = 0; p < pages.length; p++) {\n    const page = pages[p];\n    if (!page) continue;\n    const i = page.items.findIndex((item) => item.transcript_id === id);\n    if (i >= 0) return { pageIndex: p, itemIndex: i };\n  }\n  return null;\n};\n\nconst getAdjacentIds = (\n  pages: TranscriptsResponse[],\n  pos: Position\n): [string | undefined, string | undefined] => {\n  const page = pages[pos.pageIndex]!;\n  // Note: prevId is undefined at position 0; reverse paging not yet supported\n  const prevId =\n    pos.itemIndex > 0\n      ? page.items[pos.itemIndex - 1]?.transcript_id\n      : pages[pos.pageIndex - 1]?.items.at(-1)?.transcript_id;\n  const nextId =\n    pos.itemIndex < page.items.length - 1\n      ? page.items[pos.itemIndex + 1]?.transcript_id\n      : pages[pos.pageIndex + 1]?.items[0]?.transcript_id;\n  return [prevId, nextId];\n};\n\nconst isLastLoadedItem = (\n  pages: TranscriptsResponse[],\n  pos: Position\n): boolean =>\n  pos.pageIndex === pages.length - 1 &&\n  pos.itemIndex === pages[pos.pageIndex]!.items.length - 1;\n","import { skipToken } from \"@tanstack/react-query\";\n\nimport { useApi } from \"../../state/store\";\nimport { Transcript } from \"../../types/api-types\";\nimport { AsyncData } from \"../../utils/asyncData\";\nimport { useAsyncDataFromQuery } from \"../../utils/asyncDataFromQuery\";\n\ntype TranscriptParams = {\n  location: string;\n  id: string;\n};\n\nexport const useTranscript = (\n  params: TranscriptParams | typeof skipToken\n): AsyncData<Transcript> => {\n  const api = useApi();\n\n  return useAsyncDataFromQuery({\n    queryKey: params === skipToken ? [skipToken] : [\"transcript\", params],\n    queryFn:\n      params === skipToken\n        ? skipToken\n        : () => api.getTranscript(params.location, params.id),\n    staleTime: Infinity,\n  });\n};\n","import {\n  CSSProperties,\n  FC,\n  ReactNode,\n  RefObject,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\n\ninterface StickyScrollProps {\n  children: ReactNode;\n  scrollRef: RefObject<HTMLElement | null>;\n  offsetTop?: number;\n  zIndex?: number;\n  className?: string;\n  stickyClassName?: string;\n  onStickyChange?: (isSticky: boolean) => void;\n}\n\nexport const StickyScroll: FC<StickyScrollProps> = ({\n  children,\n  scrollRef,\n  offsetTop = 0,\n  zIndex = 100,\n  className = \"\",\n  stickyClassName = \"is-sticky\",\n  onStickyChange,\n}) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n  const [isSticky, setIsSticky] = useState(false);\n  const [dimensions, setDimensions] = useState({\n    width: 0,\n    height: 0,\n    left: 0,\n    stickyTop: 0, // Store the position where the element should stick\n  });\n\n  useEffect(() => {\n    const wrapper = wrapperRef.current;\n    const content = contentRef.current;\n    const scrollContainer = scrollRef.current;\n\n    if (!wrapper || !content || !scrollContainer) {\n      return;\n    }\n\n    // Create a sentinel element that will be positioned at the desired sticky point\n    const sentinel = document.createElement(\"div\");\n    sentinel.style.position = \"absolute\";\n    sentinel.style.top = \"0px\"; // Position at the top of the wrapper\n    sentinel.style.left = \"0\";\n    sentinel.style.width = \"1px\";\n    sentinel.style.height = \"1px\";\n    sentinel.style.pointerEvents = \"none\";\n    wrapper.prepend(sentinel);\n\n    // Create a width tracker element that always has the same width as the wrapper\n    // This helps us know what width to apply to the fixed element\n    const widthTracker = document.createElement(\"div\");\n    widthTracker.style.position = \"absolute\";\n    widthTracker.style.top = \"0\";\n    widthTracker.style.left = \"0\";\n    widthTracker.style.width = \"100%\";\n    widthTracker.style.height = \"0\";\n    widthTracker.style.pointerEvents = \"none\";\n    widthTracker.style.visibility = \"hidden\";\n    wrapper.prepend(widthTracker);\n\n    // Measure element dimensions and calculate sticky position\n    const updateDimensions = () => {\n      if (wrapper && scrollContainer) {\n        const contentRect = content.getBoundingClientRect();\n        const containerRect = scrollContainer.getBoundingClientRect();\n        const trackerRect = widthTracker.getBoundingClientRect();\n\n        // Calculate where the top of the content should be when sticky\n        // This is the distance from the top of the scroll container\n        // plus any additional offsetTop\n        const stickyTop = containerRect.top + offsetTop;\n\n        setDimensions({\n          // Use the width tracker to get the right width that respects\n          // the parent container's current width, rather than the content's width\n          width: trackerRect.width,\n          height: contentRect.height,\n          left: trackerRect.left,\n          stickyTop,\n        });\n      }\n    };\n\n    // Initial measurement\n    updateDimensions();\n\n    // Monitor size changes\n    const resizeObserver = new ResizeObserver(() => {\n      // Use animationFrame to ensure dimensions are updated after DOM has settled\n      requestAnimationFrame(() => {\n        updateDimensions();\n        // If sticky, force a re-measurement of position to update layout\n        if (isSticky) {\n          handleScroll();\n        }\n      });\n    });\n\n    resizeObserver.observe(wrapper);\n    resizeObserver.observe(scrollContainer);\n    resizeObserver.observe(content);\n\n    // Add scroll event listener for more precise control\n    const handleScroll = () => {\n      const sentinelRect = sentinel.getBoundingClientRect();\n      const containerRect = scrollContainer.getBoundingClientRect();\n\n      // Check if sentinel is above the top of the viewport + offset\n      const shouldBeSticky = sentinelRect.top < containerRect.top + offsetTop;\n\n      if (shouldBeSticky !== isSticky) {\n        updateDimensions();\n        setIsSticky(shouldBeSticky);\n\n        if (onStickyChange) {\n          onStickyChange(shouldBeSticky);\n        }\n      }\n    };\n\n    scrollContainer.addEventListener(\"scroll\", handleScroll);\n\n    // Trigger initial check\n    handleScroll();\n\n    // Clean up\n    return () => {\n      resizeObserver.disconnect();\n      scrollContainer.removeEventListener(\"scroll\", handleScroll);\n      if (sentinel.parentNode) {\n        sentinel.parentNode.removeChild(sentinel);\n      }\n      if (widthTracker.parentNode) {\n        widthTracker.parentNode.removeChild(widthTracker);\n      }\n    };\n  }, [scrollRef, offsetTop, onStickyChange, isSticky]);\n\n  // Wrapper styles - this div serves as the placeholder\n  // When sticky, we need to ensure the wrapper has the right dimensions\n  // to prevent content jumping when the element is detached from normal flow\n  const wrapperStyle: CSSProperties = {\n    position: \"relative\",\n    height: isSticky ? `${dimensions.height}px` : \"auto\",\n    // Don't constrain width - let it flow naturally with the content\n  };\n\n  // Content styles - position at the calculated stickyTop when sticky\n  // For sticky mode, use fixed positioning but maintain the original width\n  const contentStyle: CSSProperties = isSticky\n    ? {\n        position: \"fixed\",\n        top: `${dimensions.stickyTop}px`,\n        left: `${dimensions.left}px`,\n        width: `${dimensions.width}px`, // Keep explicit width to prevent expanding to 100%\n        maxHeight: `calc(100vh - ${dimensions.stickyTop}px)`,\n        zIndex,\n      }\n    : {};\n\n  const contentClassName =\n    isSticky && stickyClassName\n      ? `${className} ${stickyClassName}`.trim()\n      : className;\n\n  return (\n    <div ref={wrapperRef} style={wrapperStyle}>\n      <div ref={contentRef} className={contentClassName} style={contentStyle}>\n        {children}\n      </div>\n    </div>\n  );\n};\n","import {\n  ChatMessage,\n  ChatMessageSystem,\n  ChatMessageUser,\n  ChatMessageAssistant,\n  ChatMessageTool,\n  ContentText,\n  ContentReasoning,\n  ContentImage,\n  ContentAudio,\n  ContentVideo,\n  ContentData,\n  ContentToolUse,\n  ContentDocument,\n} from \"../../types/api-types\";\n\nexport interface MessagesToStrOptions {\n  excludeSystem?: boolean;\n  excludeToolUsage?: boolean;\n  excludeReasoning?: boolean;\n}\n\nexport const messagesToStr = (\n  messages: ChatMessage[],\n  options?: MessagesToStrOptions\n): string => {\n  const opts = options || {};\n  return messages\n    .map((msg) => messageToStr(msg, opts))\n    .filter((str): str is string => str !== null)\n    .join(\"\\n\");\n};\n\nconst messageToStr = (\n  message:\n    | ChatMessageSystem\n    | ChatMessageUser\n    | ChatMessageAssistant\n    | ChatMessageTool,\n  options: MessagesToStrOptions\n): string | null => {\n  // Exclude system messages if requested\n  if (options.excludeSystem && message.role === \"system\") {\n    return null;\n  }\n\n  const content = betterContentText(\n    message.content,\n    options.excludeToolUsage || false,\n    options.excludeReasoning || false\n  );\n\n  // Handle assistant messages with tool calls\n  if (\n    !options.excludeToolUsage &&\n    message.role === \"assistant\" &&\n    message.tool_calls\n  ) {\n    const assistantMsg = message;\n    let entry = `${message.role.toUpperCase()}:\\n${content}\\n`;\n\n    if (assistantMsg.tool_calls) {\n      for (const tool of assistantMsg.tool_calls) {\n        const funcName = tool.function;\n        const args = tool.arguments;\n\n        if (typeof args === \"object\" && args !== null) {\n          const argsText = Object.entries(args)\n            .map(([k, v]) => `${k}: ${String(v)}`)\n            .join(\"\\n\");\n          entry += `\\nTool Call: ${funcName}\\nArguments:\\n${argsText}\\n`;\n        } else {\n          entry += `\\nTool Call: ${funcName}\\n`;\n        }\n      }\n    }\n\n    return entry;\n  }\n\n  // Handle tool messages\n  if (message.role === \"tool\") {\n    if (options.excludeToolUsage) {\n      return null;\n    }\n    const toolMsg = message;\n    const funcName = toolMsg.function || \"unknown\";\n    const errorPart = toolMsg.error\n      ? `\\n\\nError in tool call '${funcName}':\\n${toolMsg.error.message}\\n`\n      : \"\";\n    return `${message.role.toUpperCase()}:\\n${content}${errorPart}\\n`;\n  }\n\n  // Default formatting for system, user, and assistant messages without tool calls\n  return `${message.role.toUpperCase()}:\\n${content}\\n`;\n};\n\nconst textFromContent = (\n  content:\n    | ContentText\n    | ContentReasoning\n    | ContentImage\n    | ContentAudio\n    | ContentVideo\n    | ContentData\n    | ContentToolUse\n    | ContentDocument,\n  excludeToolUsage: boolean,\n  excludeReasoning: boolean\n): string | null => {\n  switch (content.type) {\n    case \"text\":\n      return content.text;\n\n    case \"reasoning\": {\n      const reasoningContent = content;\n      if (excludeReasoning) {\n        return null;\n      }\n      const reasoning = reasoningContent.redacted\n        ? reasoningContent.summary\n        : reasoningContent.reasoning;\n      if (!reasoning) {\n        return null;\n      }\n      // Bracket it with start/finish since it could be multiple lines long\n      return `\\n<think>${reasoning}</think>`;\n    }\n\n    case \"tool_use\": {\n      if (excludeToolUsage) {\n        return null;\n      }\n      const toolUse = content;\n      const errorStr = toolUse.error ? ` ${toolUse.error}` : \"\";\n      return `\\nTool Use: ${toolUse.name}(${toolUse.arguments}) -> ${toolUse.result}${errorStr}`;\n    }\n\n    case \"image\":\n    case \"audio\":\n    case \"video\":\n    case \"data\":\n    case \"document\":\n      return `<${content.type} />`;\n\n    default:\n      return null;\n  }\n};\n\nconst betterContentText = (\n  content:\n    | string\n    | Array<\n        | ContentText\n        | ContentReasoning\n        | ContentImage\n        | ContentAudio\n        | ContentVideo\n        | ContentData\n        | ContentToolUse\n        | ContentDocument\n      >,\n  excludeToolUsage: boolean,\n  excludeReasoning: boolean\n): string => {\n  if (typeof content === \"string\") {\n    return content;\n  }\n\n  const allText = content\n    .map((c) => textFromContent(c, excludeToolUsage, excludeReasoning))\n    .filter((text): text is string => text !== null);\n\n  return allText.join(\"\\n\");\n};\n","import { useCallback, useMemo } from \"react\";\n\nimport {\n  eventTypeValues,\n  EventTypeValue,\n} from \"../../../components/transcript/types\";\nimport { useStore } from \"../../../state/store\";\n\nexport const kDefaultExcludedEventTypes: EventTypeValue[] = [\n  \"sample_init\",\n  \"sandbox\",\n  \"state\",\n  \"store\",\n];\n\nexport const useTranscriptColumnFilter = () => {\n  const excludedEventTypes =\n    useStore((state) => state.transcriptState.excludedTypes) ||\n    kDefaultExcludedEventTypes;\n\n  const setTranscriptState = useStore((state) => state.setTranscriptState);\n\n  const setExcludedEventTypes = useCallback(\n    (newTypes: EventTypeValue[]) => {\n      setTranscriptState((prev) => ({\n        ...prev,\n        excludedTypes: [...newTypes],\n      }));\n    },\n    [setTranscriptState]\n  );\n\n  const toggleEventType = useCallback(\n    (type: EventTypeValue, isCurrentlyExcluded: boolean) => {\n      const newExcluded = new Set<EventTypeValue>(\n        excludedEventTypes as EventTypeValue[]\n      );\n      if (isCurrentlyExcluded) {\n        newExcluded.delete(type);\n      } else {\n        newExcluded.add(type);\n      }\n\n      setExcludedEventTypes(Array.from(newExcluded));\n    },\n    [excludedEventTypes, setExcludedEventTypes]\n  );\n\n  const setDebugFilter = useCallback(() => {\n    setExcludedEventTypes([]);\n  }, [setExcludedEventTypes]);\n\n  const setDefaultFilter = useCallback(() => {\n    setExcludedEventTypes([...kDefaultExcludedEventTypes]);\n  }, [setExcludedEventTypes]);\n\n  const isDefaultFilter = useMemo(() => {\n    return (\n      excludedEventTypes.length === kDefaultExcludedEventTypes.length &&\n      excludedEventTypes.every((type) =>\n        kDefaultExcludedEventTypes.includes(type as EventTypeValue)\n      )\n    );\n  }, [excludedEventTypes]);\n\n  const isDebugFilter = useMemo(() => {\n    return excludedEventTypes.length === 0;\n  }, [excludedEventTypes]);\n\n  const arrangedEventTypes = useCallback((columns: number = 1) => {\n    // Sort keys alphabetically with default disabled keys at the end\n    const sortedKeys = [...eventTypeValues].sort((a, b) => {\n      const aIsDefault = kDefaultExcludedEventTypes.includes(a);\n      const bIsDefault = kDefaultExcludedEventTypes.includes(b);\n\n      // If one is in default exclude set and the other isn't, default goes to end\n      if (aIsDefault && !bIsDefault) return 1;\n      if (!aIsDefault && bIsDefault) return -1;\n\n      // Both are in same category (both default or both not default), sort alphabetically\n      return a.localeCompare(b);\n    });\n\n    if (columns === 1) {\n      return sortedKeys;\n    }\n\n    // Arrange for multi-column layout with proper reading order\n    const itemsPerColumn = Math.ceil(sortedKeys.length / columns);\n    const columnArrays: EventTypeValue[][] = [];\n\n    // Split into columns\n    for (let col = 0; col < columns; col++) {\n      const start = col * itemsPerColumn;\n      const end = Math.min(start + itemsPerColumn, sortedKeys.length);\n      columnArrays.push(sortedKeys.slice(start, end));\n    }\n\n    // Interleave items from all columns\n    const arrangedKeys: EventTypeValue[] = [];\n    const maxItemsInColumn = Math.max(...columnArrays.map((col) => col.length));\n\n    for (let row = 0; row < maxItemsInColumn; row++) {\n      for (let col = 0; col < columns; col++) {\n        const item = columnArrays[col]?.[row];\n        if (item !== undefined) {\n          arrangedKeys.push(item);\n        }\n      }\n    }\n\n    return arrangedKeys;\n  }, []);\n\n  return {\n    excludedEventTypes,\n    isDefaultFilter,\n    isDebugFilter,\n    setDefaultFilter,\n    setDebugFilter,\n    toggleEventType,\n    arrangedEventTypes,\n  };\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { PopOver } from \"../../components/PopOver\";\n\nimport { useTranscriptColumnFilter } from \"./hooks/useTranscriptColumnFilter\";\nimport styles from \"./TranscriptFilterPopover.module.css\";\n\nexport interface TranscriptFilterProps {\n  showing: boolean;\n  setShowing: (showing: boolean) => void;\n  positionEl: HTMLElement | null;\n}\n\nexport const TranscriptFilterPopover: FC<TranscriptFilterProps> = ({\n  showing,\n  positionEl,\n  setShowing,\n}) => {\n  const {\n    excludedEventTypes,\n    isDefaultFilter,\n    isDebugFilter,\n    setDefaultFilter,\n    setDebugFilter,\n    toggleEventType,\n    arrangedEventTypes,\n  } = useTranscriptColumnFilter();\n\n  return (\n    <PopOver\n      id={`transcript-filter-popover`}\n      positionEl={positionEl}\n      isOpen={showing}\n      setIsOpen={setShowing}\n      placement=\"bottom-end\"\n      hoverDelay={-1}\n    >\n      <div className={clsx(styles.links, \"text-size-smaller\")}>\n        <a\n          className={clsx(\n            styles.link,\n            isDefaultFilter ? styles.selected : undefined\n          )}\n          onClick={() => setDefaultFilter()}\n        >\n          Default\n        </a>\n        |\n        <a\n          className={clsx(\n            styles.link,\n            isDebugFilter ? styles.selected : undefined\n          )}\n          onClick={() => setDebugFilter()}\n        >\n          Debug\n        </a>\n      </div>\n\n      <div className={clsx(styles.grid, \"text-size-smaller\")}>\n        {arrangedEventTypes(2).map((eventType) => {\n          const isExcluded = excludedEventTypes.includes(eventType);\n          return (\n            <div\n              key={eventType}\n              className={clsx(styles.row)}\n              onClick={() => {\n                toggleEventType(eventType, isExcluded);\n              }}\n            >\n              <input\n                type=\"checkbox\"\n                checked={!isExcluded}\n                onChange={(e) => {\n                  e.stopPropagation();\n                  toggleEventType(eventType, isExcluded);\n                }}\n              />\n              {eventType}\n            </div>\n          );\n        })}\n      </div>\n    </PopOver>\n  );\n};\n","import { VscodeSplitLayout } from \"@vscode-elements/react-elements\";\nimport clsx from \"clsx\";\nimport {\n  FC,\n  ReactNode,\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport { ChatViewVirtualList } from \"../../components/chat/ChatViewVirtualList\";\nimport { DisplayModeContext } from \"../../components/content/DisplayModeContext\";\nimport { MetaDataGrid } from \"../../components/content/MetaDataGrid\";\nimport { ApplicationIcons } from \"../../components/icons\";\nimport { StickyScroll } from \"../../components/StickyScroll\";\nimport { TabPanel, TabSet } from \"../../components/TabSet\";\nimport { ToolButton } from \"../../components/ToolButton\";\nimport { ToolDropdownButton } from \"../../components/ToolDropdownButton\";\nimport { useEventNodes } from \"../../components/transcript/hooks/useEventNodes\";\nimport { TranscriptOutline } from \"../../components/transcript/outline/TranscriptOutline\";\nimport { TranscriptViewNodes } from \"../../components/transcript/TranscriptViewNodes\";\nimport {\n  EventNode,\n  kCollapsibleEventTypes,\n  kTranscriptCollapseScope,\n} from \"../../components/transcript/types\";\nimport { getValidationParam, updateValidationParam } from \"../../router/url\";\nimport { useStore } from \"../../state/store\";\nimport { Transcript } from \"../../types/api-types\";\nimport { messagesToStr } from \"../utils/messages\";\nimport { ValidationCaseEditor } from \"../validation/components/ValidationCaseEditor\";\n\nimport { useTranscriptColumnFilter } from \"./hooks/useTranscriptColumnFilter\";\nimport styles from \"./TranscriptBody.module.css\";\nimport { TranscriptFilterPopover } from \"./TranscriptFilterPopover\";\n\nexport const kTranscriptMessagesTabId = \"transcript-messages\";\nexport const kTranscriptEventsTabId = \"transcript-events\";\nexport const kTranscriptMetadataTabId = \"transcript-metadata\";\nexport const kTranscriptInfoTabId = \"transcript-info\";\n\n/**\n * Recursively collects all collapsible event IDs from the event tree.\n */\nconst collectAllCollapsibleIds = (\n  nodes: EventNode[]\n): Record<string, boolean> => {\n  const result: Record<string, boolean> = {};\n  const traverse = (nodeList: EventNode[]) => {\n    for (const node of nodeList) {\n      if (kCollapsibleEventTypes.includes(node.event.event)) {\n        result[node.id] = true;\n      }\n      if (node.children.length > 0) {\n        traverse(node.children);\n      }\n    }\n  };\n  traverse(nodes);\n  return result;\n};\n\ninterface TranscriptBodyProps {\n  transcript: Transcript;\n  scrollRef: RefObject<HTMLDivElement | null>;\n}\n\nexport const TranscriptBody: FC<TranscriptBodyProps> = ({\n  transcript,\n  scrollRef,\n}) => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const tabParam = searchParams.get(\"tab\");\n\n  // Get event or message ID from query params for deep linking\n  const eventParam = searchParams.get(\"event\");\n  const messageParam = searchParams.get(\"message\");\n\n  // Selected tab\n  const selectedTranscriptTab = useStore(\n    (state) => state.selectedTranscriptTab\n  );\n  const setSelectedTranscriptTab = useStore(\n    (state) => state.setSelectedTranscriptTab\n  );\n  const resolvedSelectedTranscriptTab =\n    tabParam || selectedTranscriptTab || kTranscriptMessagesTabId;\n\n  const handleTabChange = useCallback(\n    (tabId: string) => {\n      //  update both store and URL\n      setSelectedTranscriptTab(tabId);\n      setSearchParams((prevParams) => {\n        const newParams = new URLSearchParams(prevParams);\n        newParams.set(\"tab\", tabId);\n        return newParams;\n      });\n    },\n    [setSelectedTranscriptTab, setSearchParams]\n  );\n\n  // Auto-switch tab based on deep link params\n  useEffect(() => {\n    if (\n      eventParam &&\n      resolvedSelectedTranscriptTab !== kTranscriptEventsTabId\n    ) {\n      handleTabChange(kTranscriptEventsTabId);\n    } else if (\n      messageParam &&\n      resolvedSelectedTranscriptTab !== kTranscriptMessagesTabId\n    ) {\n      handleTabChange(kTranscriptMessagesTabId);\n    }\n  }, [\n    eventParam,\n    messageParam,\n    resolvedSelectedTranscriptTab,\n    handleTabChange,\n  ]);\n\n  // Transcript Filtering\n  const transcriptFilterButtonRef = useRef<HTMLButtonElement | null>(null);\n  const [transcriptFilterShowing, setTranscriptFilterShowing] = useState(false);\n  const toggleTranscriptFilterShowing = useCallback(() => {\n    setTranscriptFilterShowing((prev) => !prev);\n  }, []);\n  const { excludedEventTypes, isDebugFilter, isDefaultFilter } =\n    useTranscriptColumnFilter();\n\n  const filteredEvents = useMemo(() => {\n    if (excludedEventTypes.length === 0) {\n      return transcript.events;\n    }\n    return transcript.events.filter((event) => {\n      return !excludedEventTypes.includes(event.event);\n    });\n  }, [transcript.events, excludedEventTypes]);\n\n  // Transcript event data\n  const { eventNodes, defaultCollapsedIds } = useEventNodes(\n    filteredEvents,\n    false\n  );\n\n  // Transcript collapse\n  const eventsCollapsed = useStore((state) => state.transcriptState.collapsed);\n  const setTranscriptState = useStore((state) => state.setTranscriptState);\n  const collapseEvents = useCallback(\n    (collapsed: boolean) => {\n      setTranscriptState((prev) => ({\n        ...prev,\n        collapsed,\n      }));\n    },\n    [setTranscriptState]\n  );\n\n  const setCollapsedEvents = useStore(\n    (state) => state.setTranscriptCollapsedEvents\n  );\n\n  // Outline toggle\n  const outlineCollapsed = useStore(\n    (state) => state.transcriptState.outlineCollapsed\n  );\n  const toggleOutline = useCallback(\n    (collapsed: boolean) => {\n      setTranscriptState((prev) => ({\n        ...prev,\n        outlineCollapsed: collapsed,\n      }));\n    },\n    [setTranscriptState]\n  );\n\n  // Validation sidebar - URL is the source of truth\n  const validationSidebarCollapsed = !getValidationParam(searchParams);\n\n  const toggleValidationSidebar = useCallback(() => {\n    setSearchParams((prevParams) => {\n      const isCurrentlyOpen = getValidationParam(prevParams);\n      return updateValidationParam(prevParams, !isCurrentlyOpen);\n    });\n  }, [setSearchParams]);\n\n  // Display mode for raw/rendered text\n  const displayMode = useStore(\n    (state) => state.transcriptState.displayMode ?? \"rendered\"\n  );\n\n  const toggleDisplayMode = useCallback(() => {\n    setTranscriptState((prev) => ({\n      ...prev,\n      displayMode: prev.displayMode === \"raw\" ? \"rendered\" : \"raw\",\n    }));\n  }, [setTranscriptState]);\n\n  const displayModeContextValue = useMemo(\n    () => ({ displayMode }),\n    [displayMode]\n  );\n\n  useEffect(() => {\n    if (transcript.events.length <= 0 || eventsCollapsed === undefined) {\n      return;\n    }\n\n    if (!eventsCollapsed && Object.keys(defaultCollapsedIds).length > 0) {\n      setCollapsedEvents(kTranscriptCollapseScope, defaultCollapsedIds);\n    } else if (eventsCollapsed) {\n      const allCollapsibleIds = collectAllCollapsibleIds(eventNodes);\n      setCollapsedEvents(kTranscriptCollapseScope, allCollapsibleIds);\n    }\n  }, [\n    defaultCollapsedIds,\n    eventNodes,\n    eventsCollapsed,\n    setCollapsedEvents,\n    transcript.events.length,\n  ]);\n\n  const tabTools: ReactNode[] = [];\n\n  if (resolvedSelectedTranscriptTab === kTranscriptEventsTabId) {\n    const label = isDebugFilter\n      ? \"Debug\"\n      : isDefaultFilter\n        ? \"Default\"\n        : \"Custom\";\n\n    tabTools.push(\n      <ToolButton\n        key=\"events-filter-transcript\"\n        label={`Events: ${label}`}\n        icon={ApplicationIcons.filter}\n        onClick={toggleTranscriptFilterShowing}\n        className={styles.tabTool}\n        subtle={true}\n        ref={transcriptFilterButtonRef}\n      />\n    );\n\n    tabTools.push(\n      <ToolButton\n        key=\"event-collapse-transcript\"\n        label={eventsCollapsed ? \"Expand\" : \"Collapse\"}\n        icon={\n          eventsCollapsed\n            ? ApplicationIcons.expand.all\n            : ApplicationIcons.collapse.all\n        }\n        onClick={() => {\n          collapseEvents(!eventsCollapsed);\n        }}\n        subtle={true}\n      />\n    );\n  }\n\n  tabTools.push(\n    <ToolButton\n      key=\"display-mode-toggle\"\n      label={displayMode === \"rendered\" ? \"Raw\" : \"Rendered\"}\n      icon={ApplicationIcons.display}\n      onClick={toggleDisplayMode}\n      className={styles.tabTool}\n      subtle={true}\n      title={\n        displayMode === \"rendered\"\n          ? \"Show raw text without markdown rendering\"\n          : \"Show rendered markdown\"\n      }\n    />\n  );\n\n  tabTools.push(\n    <CopyToolbarButton transcript={transcript} className={styles.tabTool} />\n  );\n\n  tabTools.push(\n    <ToolButton\n      key=\"validation-sidebar-toggle\"\n      label=\"Validation\"\n      icon={ApplicationIcons.edit}\n      onClick={toggleValidationSidebar}\n      className={styles.tabTool}\n      subtle={true}\n      title={\n        validationSidebarCollapsed\n          ? \"Show validation editor\"\n          : \"Hide validation editor\"\n      }\n    />\n  );\n\n  const tabPanels = [\n    <TabPanel\n      key={kTranscriptMessagesTabId}\n      id={kTranscriptMessagesTabId}\n      className={clsx(styles.chatTab)}\n      title=\"Messages\"\n      onSelected={() => {\n        handleTabChange(kTranscriptMessagesTabId);\n      }}\n      selected={resolvedSelectedTranscriptTab === kTranscriptMessagesTabId}\n      scrollable={false}\n    >\n      <ChatViewVirtualList\n        id={\"transcript-id\"}\n        messages={transcript.messages || []}\n        initialMessageId={messageParam}\n        toolCallStyle={\"complete\"}\n        indented={false}\n        className={styles.chatList}\n        scrollRef={scrollRef}\n        showLabels={true}\n      />\n    </TabPanel>,\n  ];\n\n  if (transcript.events && transcript.events.length > 0) {\n    tabPanels.push(\n      <TabPanel\n        key=\"transcript-events\"\n        id={kTranscriptEventsTabId}\n        className={clsx(styles.eventsTab)}\n        title=\"Events\"\n        onSelected={() => {\n          handleTabChange(kTranscriptEventsTabId);\n        }}\n        selected={resolvedSelectedTranscriptTab === kTranscriptEventsTabId}\n        scrollable={false}\n      >\n        <div\n          className={clsx(\n            styles.eventsContainer,\n            outlineCollapsed ? styles.outlineCollapsed : undefined\n          )}\n        >\n          <StickyScroll\n            scrollRef={scrollRef}\n            className={styles.eventsOutline}\n            offsetTop={40}\n          >\n            {!outlineCollapsed && (\n              <TranscriptOutline\n                eventNodes={eventNodes}\n                defaultCollapsedIds={defaultCollapsedIds}\n                scrollRef={scrollRef}\n              />\n            )}\n            <div\n              className={styles.outlineToggle}\n              onClick={() => toggleOutline(!outlineCollapsed)}\n            >\n              <i className={ApplicationIcons.sidebar} />\n            </div>\n          </StickyScroll>\n          <div className={styles.eventsSeparator} />\n          <TranscriptViewNodes\n            id={\"transcript-events-list\"}\n            eventNodes={eventNodes}\n            defaultCollapsedIds={defaultCollapsedIds}\n            initialEventId={eventParam}\n            className={styles.eventsList}\n            scrollRef={scrollRef}\n          />\n        </div>\n        <TranscriptFilterPopover\n          showing={transcriptFilterShowing}\n          setShowing={setTranscriptFilterShowing}\n          // eslint-disable-next-line react-hooks/refs -- positionEl accepts null; PopOver/Popper handles this in effects and updates when ref is populated\n          positionEl={transcriptFilterButtonRef.current}\n        />\n      </TabPanel>\n    );\n  }\n\n  if (transcript.metadata && Object.keys(transcript.metadata).length > 0) {\n    tabPanels.push(\n      <TabPanel\n        key=\"transcript-metadata\"\n        id={kTranscriptMetadataTabId}\n        className={clsx(styles.metadataTab)}\n        title=\"Metadata\"\n        onSelected={() => {\n          handleTabChange(kTranscriptMetadataTabId);\n        }}\n        selected={resolvedSelectedTranscriptTab === kTranscriptMetadataTabId}\n        scrollable={false}\n      >\n        <div className={styles.scrollable}>\n          <MetaDataGrid\n            id=\"transcript-metadata-grid\"\n            entries={transcript.metadata || {}}\n            className={clsx(styles.metadata)}\n          />\n        </div>\n      </TabPanel>\n    );\n  }\n\n  const { events, messages, metadata, ...infoData } = transcript;\n  tabPanels.push(\n    <TabPanel\n      key=\"transcript-info\"\n      id={kTranscriptInfoTabId}\n      className={clsx(styles.infoTab)}\n      title=\"Info\"\n      onSelected={() => {\n        handleTabChange(kTranscriptInfoTabId);\n      }}\n      selected={resolvedSelectedTranscriptTab === kTranscriptInfoTabId}\n      scrollable={false}\n    >\n      <div className={styles.scrollable}>\n        <MetaDataGrid\n          id=\"transcript-info-grid\"\n          entries={infoData}\n          className={clsx(styles.metadata)}\n        />\n      </div>\n    </TabPanel>\n  );\n\n  const tabSetContent = (\n    <TabSet\n      id={\"transcript-body\"}\n      type=\"pills\"\n      tabPanelsClassName={clsx(styles.tabSet)}\n      tabControlsClassName={clsx(styles.tabControl)}\n      className={clsx(styles.tabs)}\n      tools={tabTools}\n    >\n      {tabPanels}\n    </TabSet>\n  );\n\n  return (\n    <DisplayModeContext.Provider value={displayModeContextValue}>\n      {validationSidebarCollapsed ? (\n        tabSetContent\n      ) : (\n        <VscodeSplitLayout\n          className={styles.splitLayout}\n          fixedPane=\"end\"\n          initialHandlePosition=\"80%\"\n          minEnd=\"180px\"\n          minStart=\"200px\"\n        >\n          <div slot=\"start\" className={styles.splitStart}>\n            {tabSetContent}\n          </div>\n          <div slot=\"end\" className={styles.validationSidebar}>\n            <ValidationCaseEditor transcriptId={transcript.transcript_id} />\n          </div>\n        </VscodeSplitLayout>\n      )}\n    </DisplayModeContext.Provider>\n  );\n};\n\nconst CopyToolbarButton: FC<{\n  transcript: Transcript;\n  className?: string | string[];\n}> = ({ transcript, className }) => {\n  const [icon, setIcon] = useState<string>(ApplicationIcons.copy);\n\n  const showCopyConfirmation = useCallback(() => {\n    setIcon(ApplicationIcons.confirm);\n    setTimeout(() => setIcon(ApplicationIcons.copy), 1250);\n  }, []);\n\n  if (!transcript) {\n    return undefined;\n  }\n\n  return (\n    <ToolDropdownButton\n      key=\"sample-copy\"\n      label=\"Copy\"\n      icon={icon}\n      className={clsx(className)}\n      dropdownClassName={\"text-size-smallest\"}\n      dropdownAlign=\"right\"\n      subtle={true}\n      items={{\n        UUID: () => {\n          if (transcript.transcript_id) {\n            void navigator.clipboard.writeText(transcript.transcript_id);\n            showCopyConfirmation();\n          }\n        },\n        Transcript: () => {\n          if (transcript.messages) {\n            void navigator.clipboard.writeText(\n              messagesToStr(transcript.messages)\n            );\n            showCopyConfirmation();\n          }\n        },\n      }}\n    />\n  );\n};\n","import { FC } from \"react\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport { useLoggingNavigate } from \"../../debugging/navigationDebugging\";\nimport { transcriptRoute } from \"../../router/url\";\nimport { Transcript } from \"../../types/api-types\";\nimport { NextPreviousNav } from \"../components/NextPreviousNav\";\nimport { TaskName } from \"../components/TaskName\";\n\ninterface TranscriptNavProps {\n  transcriptsDir: string;\n  transcript?: Transcript;\n  prevId?: string;\n  nextId?: string;\n}\n\nexport const TranscriptNav: FC<TranscriptNavProps> = ({\n  transcriptsDir,\n  transcript,\n  prevId,\n  nextId,\n}) => {\n  const navigate = useLoggingNavigate(\"TranscriptNav\");\n  const [searchParams] = useSearchParams();\n\n  const handlePrevious = () => {\n    if (prevId) {\n      void navigate(transcriptRoute(transcriptsDir, prevId, searchParams));\n    }\n  };\n\n  const handleNext = () => {\n    if (nextId) {\n      void navigate(transcriptRoute(transcriptsDir, nextId, searchParams));\n    }\n  };\n\n  return (\n    <NextPreviousNav\n      onPrevious={handlePrevious}\n      onNext={handleNext}\n      hasPrevious={!!prevId}\n      hasNext={!!nextId}\n    >\n      {transcript && (\n        <TaskName\n          taskId={transcript.task_id}\n          taskRepeat={transcript.task_repeat}\n          taskSet={transcript.task_set}\n        />\n      )}\n    </NextPreviousNav>\n  );\n};\n","import clsx from \"clsx\";\nimport { FC, ReactNode } from \"react\";\n\nimport styles from \"./HeadingGrid.module.css\";\n\nexport interface HeadingValue {\n  label: string;\n  value: ReactNode;\n  labelPosition?: \"left\" | \"right\" | \"above\" | \"below\";\n}\n\ninterface HeadingGridProps {\n  headings: HeadingValue[];\n  rows?: number;\n  columns?: number;\n  className?: string | string[];\n  labelClassName?: string | string[];\n  valueClassName?: string | string[];\n}\n\nexport const HeadingGrid: FC<HeadingGridProps> = ({\n  headings,\n  rows,\n  columns,\n  className,\n  labelClassName,\n  valueClassName,\n}) => {\n  // Default to 1 row and N columns (where N is the number of headings)\n  const actualColumns = columns ?? headings.length;\n  const actualRows = rows ?? 1;\n\n  // Calculate the grid size\n  const totalCells = actualRows * actualColumns;\n\n  // Pad the headings array if needed or slice if too many\n  const gridItems = headings.slice(0, totalCells);\n\n  return (\n    <div\n      className={clsx(styles.headingGrid, className)}\n      style={{\n        gridTemplateColumns: `repeat(${actualColumns}, auto)`,\n        gridTemplateRows: `repeat(${actualRows}, auto)`,\n      }}\n    >\n      {gridItems.map((heading, index) => (\n        <HeadingCell\n          key={index}\n          heading={heading}\n          labelClassName={labelClassName}\n          valueClassName={valueClassName}\n        />\n      ))}\n    </div>\n  );\n};\n\ninterface HeadingCellProps {\n  heading: HeadingValue;\n  labelClassName?: string | string[];\n  valueClassName?: string | string[];\n}\n\nconst HeadingCell: FC<HeadingCellProps> = ({\n  heading,\n  labelClassName,\n  valueClassName,\n}) => {\n  const { label, value, labelPosition = \"above\" } = heading;\n\n  // Render based on label position\n  switch (labelPosition) {\n    case \"left\":\n      return (\n        <div className={clsx(styles.headingCell, styles.horizontal)}>\n          <span className={clsx(styles.label, labelClassName)}>{label}</span>\n          <span className={clsx(styles.value, valueClassName)}>{value}</span>\n        </div>\n      );\n    case \"right\":\n      return (\n        <div className={clsx(styles.headingCell, styles.horizontal)}>\n          <span className={clsx(styles.value, valueClassName)}>{value}</span>\n          <span className={clsx(styles.label, labelClassName)}>{label}</span>\n        </div>\n      );\n    case \"above\":\n      return (\n        <div className={clsx(styles.headingCell, styles.vertical)}>\n          <span className={clsx(styles.label, labelClassName)}>{label}</span>\n          <span className={clsx(styles.value, valueClassName)}>{value}</span>\n        </div>\n      );\n    case \"below\":\n      return (\n        <div className={clsx(styles.headingCell, styles.vertical)}>\n          <span className={clsx(styles.value, valueClassName)}>{value}</span>\n          <span className={clsx(styles.label, labelClassName)}>{label}</span>\n        </div>\n      );\n  }\n};\n","import clsx from \"clsx\";\nimport { FC } from \"react\";\n\nimport { Transcript } from \"../../types/api-types\";\nimport { formatDateTime, formatNumber, formatTime } from \"../../utils/format\";\nimport { HeadingGrid, HeadingValue } from \"../components/HeadingGrid\";\nimport { ScoreValue } from \"../components/ScoreValue\";\nimport { TaskName } from \"../components/TaskName\";\n\nimport styles from \"./TranscriptTitle.module.css\";\n\ninterface TranscriptTitleProps {\n  transcript: Transcript;\n}\n\nexport const TranscriptTitle: FC<TranscriptTitleProps> = ({ transcript }) => {\n  const cols: HeadingValue[] = [\n    {\n      label: \"Transcript\",\n      value: (\n        <TaskName\n          taskId={transcript.task_id}\n          taskRepeat={transcript.task_repeat}\n          taskSet={transcript.task_set}\n        />\n      ),\n    },\n  ];\n\n  if (transcript.date) {\n    cols.push({\n      label: \"Date\",\n      value: formatDateTime(new Date(transcript.date)),\n    });\n  }\n\n  if (transcript.agent) {\n    cols.push({\n      label: \"Agent\",\n      value: transcript.agent,\n    });\n  }\n\n  if (transcript.model) {\n    cols.push({\n      label: \"Model\",\n      value: transcript.model,\n    });\n  }\n\n  if (transcript.limit) {\n    cols.push({\n      label: \"Limit\",\n      value: transcript.limit,\n    });\n  }\n\n  if (transcript.error) {\n    cols.push({\n      label: \"Error\",\n      value: transcript.error,\n    });\n  }\n\n  if (transcript.total_tokens) {\n    cols.push({\n      label: \"Tokens\",\n      value: formatNumber(transcript.total_tokens),\n    });\n  }\n\n  if (transcript.total_time) {\n    cols.push({\n      label: \"Time\",\n      value: formatTime(transcript.total_time),\n    });\n  }\n\n  if (transcript.message_count) {\n    cols.push({\n      label: \"Messages\",\n      value: transcript.message_count.toString(),\n    });\n  }\n\n  if (transcript.score) {\n    cols.push({\n      label: \"Score\",\n      value: <ScoreValue score={transcript.score} />,\n    });\n  }\n\n  return (\n    <HeadingGrid\n      headings={cols}\n      className={clsx(styles.titleContainer)}\n      labelClassName={clsx(\n        \"text-style-label\",\n        \"text-size-smallestest\",\n        \"text-style-secondary\"\n      )}\n      valueClassName={clsx(\"text-size-small\")}\n    />\n  );\n};\n","import { skipToken } from \"@tanstack/react-query\";\nimport clsx from \"clsx\";\nimport { FC, useRef } from \"react\";\n\nimport { ApiError } from \"../../api/request\";\nimport { ErrorPanel } from \"../../components/ErrorPanel\";\nimport { LoadingBar } from \"../../components/LoadingBar\";\nimport { useDocumentTitle } from \"../../hooks/useDocumentTitle\";\nimport { useStore } from \"../../state/store\";\nimport { useRequiredParams } from \"../../utils/router\";\nimport { TranscriptsNavbar } from \"../components/TranscriptsNavbar\";\nimport { useFilterConditions } from \"../hooks/useFilterConditions\";\nimport { useAdjacentTranscriptIds } from \"../server/useAdjacentTranscriptIds\";\nimport { useAppConfig } from \"../server/useAppConfig\";\nimport { useTranscript } from \"../server/useTranscript\";\nimport { TRANSCRIPTS_INFINITE_SCROLL_CONFIG } from \"../transcripts/constants\";\nimport { getTranscriptDisplayName } from \"../utils/transcript\";\nimport { useTranscriptsDir } from \"../utils/useTranscriptsDir\";\n\nimport { TranscriptBody } from \"./TranscriptBody\";\nimport { TranscriptNav } from \"./TranscriptNav\";\nimport styles from \"./TranscriptPanel.module.css\";\nimport { TranscriptTitle } from \"./TranscriptTitle\";\n\nexport const TranscriptPanel: FC = () => {\n  // The core scroll element for the transcript panel\n  const scrollRef = useRef<HTMLDivElement | null>(null);\n\n  // Transcript data from route\n  const { transcriptId } = useRequiredParams(\"transcriptId\");\n\n  // Transcripts directory (resolved from route, user preference, or config)\n  const {\n    displayTranscriptsDir,\n    resolvedTranscriptsDir,\n    resolvedTranscriptsDirSource,\n    setTranscriptsDir,\n  } = useTranscriptsDir(true);\n\n  // Server transcripts directory\n  const config = useAppConfig();\n  const {\n    loading,\n    data: transcript,\n    error,\n  } = useTranscript(\n    config.transcripts\n      ? { location: config.transcripts.dir, id: transcriptId }\n      : skipToken\n  );\n  const filter = Array.isArray(config.filter)\n    ? config.filter.join(\" \")\n    : config.filter;\n\n  // Set document title with transcript task name\n  useDocumentTitle(getTranscriptDisplayName(transcript), \"Transcripts\");\n\n  // Get sorting/filter from store\n  const sorting = useStore((state) => state.transcriptsTableState.sorting);\n  const condition = useFilterConditions();\n\n  // Get adjacent transcript IDs\n  const adjacentIds = useAdjacentTranscriptIds(\n    transcriptId,\n    resolvedTranscriptsDir,\n    TRANSCRIPTS_INFINITE_SCROLL_CONFIG.pageSize,\n    condition,\n    sorting\n  );\n  const [prevId, nextId] = adjacentIds.data ?? [undefined, undefined];\n\n  return (\n    <div className={clsx(styles.container)}>\n      <TranscriptsNavbar\n        transcriptsDir={displayTranscriptsDir || \"\"}\n        transcriptsDirSource={resolvedTranscriptsDirSource}\n        filter={filter}\n        setTranscriptsDir={setTranscriptsDir}\n      >\n        <TranscriptNav\n          transcriptsDir={resolvedTranscriptsDir}\n          transcript={transcript}\n          nextId={nextId}\n          prevId={prevId}\n        />\n      </TranscriptsNavbar>\n      <LoadingBar loading={loading} />\n\n      {!error && transcript && (\n        <div className={styles.transcriptContainer} ref={scrollRef}>\n          <TranscriptTitle transcript={transcript} />\n          <TranscriptBody transcript={transcript} scrollRef={scrollRef} />\n        </div>\n      )}\n      {error && (\n        <ErrorPanel\n          title={\n            error instanceof ApiError && error.status === 413\n              ? \"Transcript Too Large\"\n              : \"Error Loading Transcript\"\n          }\n          error={\n            error instanceof ApiError && error.status === 413\n              ? { message: \"This transcript exceeds the maximum size limit.\" }\n              : error\n          }\n        />\n      )}\n    </div>\n  );\n};\n"],"names":["value","useMemo","useEffect","useRef","useState","jsx","useCallback","row","jsxs","styles","outlineCollapsed","label","metadata","loading"],"mappings":"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"}